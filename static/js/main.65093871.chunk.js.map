{"version":3,"sources":["icons/pickaxe.svg","styles.js","views/Home/index.js","components/Draw/index.js","components/StyledInput/index.js","views/Draw/index.js","utils/qs/index.js","utils/math/getColor.js","utils/math/ignoreList.js","utils/math/mathml.js","utils/math/index.js","utils/localStorage.js","components/MathML/index.js","components/ObjectProperty/index.js","components/StyledTextarea/index.js","components/ObjectCreator/index.js","components/TableGenerator/index.js","components/RightFloater/index.js","components/buttons/Search/index.js","components/buttons/Save/index.js","components/buttons/Material/index.js","components/buttons/Forge/index.js","components/buttons/Command/index.js","components/buttons/Review/index.js","components/DataGrid/index.js","components/Graph/index.js","components/Accordion/index.js","components/FunctionSearch/index.js","views/Equation/index.js","containers/qsContext.js","components/Cell/index.js","components/Autocomplete/index.js","components/EditCell/index.js","views/Sheet/index.js","components/buttons/MaterialIcon/index.js","components/Sheet/index.js","components/DiscreteProcess/index.js","views/Space/index.js","components/Header/index.js","components/Help/index.js","components/buttons/Help/index.js","components/HelpSheet/index.js","components/HelpEquation/index.js","views/App/index.js","utils/registerServiceWorker.js","index.js","icons/anvil.svg","icons/crown.svg","icons/easel.svg"],"names":["module","exports","primaryColor","secondaryColor","complementaryColor","extraLightGreen","lightOrange","extraLightOrange","inputFocus","inputShadow","inputStyle","buttonHover","message","offset","StyledMessage","styled","div","Title","StyledLine","StyledLink","styles","Overview","style","fontWeight","to","Draw","props","imageDataUrl","setContext","width","height","penColor","penWidth","penType","useState","positionX","setPositionX","positionY","setPositionY","mouseDown","setMouseDown","sketchElement","useRef","drawWithState","canvas","x","y","startX","startY","endX","endY","context","getContext","beginPath","moveTo","lineTo","strokeStyle","lineWidth","lineCap","stroke","drawLine","setPositionAndDraw","event","draw","boundingRect","current","getBoundingClientRect","changedTouches","Object","values","forEach","touch","clientX","left","clientY","top","focus","blur","pageX","window","pageXOffset","pageY","pageYOffset","useEffect","img","Image","src","onload","drawImage","ref","assign","touchAction","outline","tabIndex","onMouseMove","onMouseDown","onMouseUp","onMouseLeave","onTouchStart","onTouchMove","onTouchEnd","StyledInput","input","StyledDrawView","StyledDrawControls","StyledLabel","label","StyledNumberInput","StyledButton","DrawView","innerWidth","innerHeight","setPenWidth","setPenColor","localStorage","getItem","className","type","value","onClick","clearRect","placeholder","onChange","target","setItem","toDataURL","objectFromHistory","obj","res","keys","prop","text","t","unit","u","c","urlToObject","url","JSON","parse","decodeURI","replace","getEquationFromUrl","urlObject","columnSettingsFromHistory","columnSettings","newColumnSettings","column","newSetting","s","start","i","interval","passToHistory","history","generatorSettings","pushToHistory","newContext","objectToHistory","hasProps","parseInt","l","right","r","somethingWasAdded","shouldAdd","columnSettingsToHistory","newContextString","stringify","length","push","getColor","total","charCodeAt","g","b","color","Math","max","intToHex","hex","toString","ignoreList","mathmlWrapper","title","colorVariable","variable","varText","shouldSub","variableSubscript","subscript","findVarRegex","subMatch","match","slice","RegExp","removeSpace","expandVariableWithColor","expanded","rows","reduce","acc","row","cellAcc","cell","test","addMiMaybe","mathmlTable","extrapolateMathml","beautifyGlobal","padSpecial","operatorValue","operator","response","padOperators","padNumbers","global","rightTag","item","padIgnoreList","padParentheses","cutoffChars","cutoffCharsReverse","masterOpen","masterClose","leftTag","hasLeftTag","hasRightTag","segments","splitGlobal","protectConverted","endAllLeft","endAllRight","stripExtraParentheses","getParenthesesExtent","reverse","semiTrimmedLeft","trimParentheses","semiTrimmedRight","trimOpenParentheses","trimCloseParentheses","nestedLeftSplit","nestedRightSplit","mathml","specials","special","index","revealConverted","regex","open","shouldCutoff","cutoff","firstMatch","textMatch","parenthesesMatch","filteredCutoffChars","filter","filterCutoffChars","includes","join","maskCutoffWhiteList","cutoffWhiteList","key","cutoffChar","whiteListCutoffChars","remainingRegex","divideCutoffRegex","alternateDivideCutoffRegex","maskedText","cutoffMatch","cutoffDivideMatch","cutoffAlternateDivideMatch","unmaskCutoffWhiteList","leftHasPreceding","rightHasPreceding","leftHasTrailing","rightHasTrailing","circularDependencyError","variableRegex","getVariables","useIgnoreList","matches","uniqueMatches","prev","curr","recursiveSolve","inheritedContext","parents","solvableEquation","missingContext","fullMissingContext","variables","requiredContext","solvableContext","resolution","error","parent","sort","a","usableContextVariable","prepared","undefined","solve","solution","evaluate","isNaN","parseFloat","im","stripContext","formatNumber","number","str","parts","split","getLocalStorage","localString","setLocalStorage","valueString","useLocalStorage","defaultValue","state","setState","newValue","StyledMathML","MathML","MathJax","typesetPromise","typesetClear","this","dangerouslySetInnerHTML","__html","Component","StyledContainer","Label","span","getNewContext","previousText","previousVariables","nextVariables","unusedPrevious","unusedNext","NestedProperty","id","info","newInfo","name","ObjectProperty","copyContext","nameStyle","marginTop","marginBottom","trim","marginLeft","map","StyledTextarea","textarea","StyledObjectCreator","Category","Notes","ObjectCreator","onContextChange","category","onCategoryChange","notes","onNotesChange","originalStyledInput","StyledTableGenerator","StyledOverallSection","StyledColumnSection","StyledSettingGroup","StackedColumn","Setting","TableGenerator","columns","columnColorObject","settings","onGeneratorSettingChange","onColumnSettingChange","changeSetting","settingName","paddingRight","changeColumnSetting","columnName","option","paddingTop","paddingBottom","renderColumns","StyledSearchButton","StyledSearchButtonWithHover","SearchButton","hover","backgroundColor","active","StyledSaveButton","SaveButton","location","StyledMaterialButton","StyledMaterialButtonWithHover","MaterialButton","pickaxe","alt","StyledForgeButton","StyledForgeButtonWithHover","ForgeButton","anvil","StyledCommandButton","StyledCommandButtonWithHover","CommandButton","crown","StyledReviewButton","StyledReviewButtonWithHover","ReviewButton","easel","StyledFrozenTd","FrozenColumnTd","ColumnTd","td","overrideSelect","DataGrid","body","frozenColumns","editState","setEdit","keepEditing","skipTabIndexes","initialSelectionCell","setInitialSelectionCell","shouldHandleBlur","CellComponent","cellComponent","EditCellComponent","editComponent","clickedCell","setClickedCell","selectionRange","setSelectionRange","selectionCurrent","setSelectionCurrent","setHover","selection","setSelection","blurredOnce","setBlurredOnce","shiftModifier","setShiftModifier","ctrlModifier","setCtrlModifier","editorRef","selectionRef","selectText","gridMouseMove","setRangeSelection","gridMouseDown","preventDefault","setSingleSelection","resetSelection","rowIndex","columnIndex","forceSelection","cleanRow","cleanColumn","startRow","endRow","startColumn","endColumn","editorKeyDown","closeEditor","editCell","startingValue","original","callback","save","valueOverride","updateArray","originalArray","newArrayData","cellIndex","data","updateArrayCell","updateArrayRow","filterRow","tabularizeSelection","filterToSelection","onKeyDown","onKeyUp","position","zIndex","opacity","readOnly","deleteArray","columnArray","onBlur","onPaste","clipboardData","items","getAsString","cursor","header","classes","thead","tr","ind","colIndex","numbered","hoverHeaderAndNumberedColor","headerCell","tbody","numberedOffset","Td","edit","padding","editorValue","highlightInitialColor","highlightColor","bodyCell","footer","tfoot","footerCell","Graph","labels","iteration","xAxisLabel","graphData","datasets","lineTension","fill","borderColor","pointBorderColor","pointBackgroundColor","hidden","redraw","TopBar","Accordion","toggle","children","StyledFunctionSearch","TitleSection","Close","StyledItem","DeleteButton","SubSection","NoLocal","SearchInput","CategoryLabel","sortByScore","filterWithSort","listObject","regexArray","filterPart","err","equationCategories","equation","score","equations","SelfStateAccordion","isOpen","setIsOpen","FunctionSearch","toggleSearch","deleteLocalFunction","localFunctions","setFilter","searchElement","filteredLocal","filteredPremade","premade","renderLocalEquation","renderPremadeEquation","StyledRoot","StyledMain","StyledSearch","AccordionContents","StyledMaterialSection","StyledMath","StyledGraph","StyledTableScrollableLimit","StyledTableScrollable","StyledDataGrid","Section","StyledSolution","MenuButton","StyledText","Root","table","toggleHelp","showHelp","setLocalStorageAccordionState","accordionState","showSearch","toggleMaterial","showMaterial","toggleForge","showForge","toggleReview","showReview","toggleWield","showWield","toggleCommand","showCommand","getLocalStorageFunctions","setLocalStorageFunctions","localStorageFunctions","getLocalStorageAccordionState","saveLocalFunction","date","Date","now","path","search","generateTable","nextProps","missingVariables","currentProps","currentMissingVariables","some","previous","next","newState","generatorColumns","runner","simpleContext","cells","calculateIteration","Number","toFixed","solveWithAddedContext","oldHistoryObject","newHistoryObject","cleanedHistoryObject","historyObject","passCleanedSettingsToHistory","display","tableGenerated","colorVariables","textAlign","borderRadius","boxShadow","RightFloater","withQsContext","withRouter","qsContext","getFromHistory","StyledCell","Value","InheritedValue","Solution","Cell","isInherited","StyledAutocomplete","Suggestions","SuggestionsWithHover","StyledSuggestion","Suggestion","StyledEditCell","onSelect","options","suggestions","setSuggestions","textToMatch","getSuggestions","isMouseControlled","activeIndex","stopPropagation","handleKeyDown","Equation","EditActionBar","Clickable","EditEquation","autocompleteOptions","saveNewFunction","functionName","EditCell","textValue","StyledSheet","Top","Bottom","Left","Result","RowSection","RowButton","Sheet","setLocalFunctions","dataGridEdit","setDataGridEdit","useReducer","action","newEquations","localContext","variableMap","concat","splice","iterator","setEquations","sheetContext","gridBody","equationObject","eqIndex","uniqueMissingContext","getGridBodyMap","equationArray","dispatchEquation","newFunction","existingFunctions","newFunctions","newCurrent","MaterialIcon","RightSection","StyledZoom","StyledDiscreteProcess","fontSize","showVariables","DiscreteProcess","initialInput","initialOutput","isDiscrete","setIsDiscrete","updateSheet","equationReducer","inputSheet","dispatchInputEquation","outputSheet","dispatchOutputEquation","side","alignSelf","StyledConnect","SpaceView","processes","setProcesses","uuid","process","newProcesses","newProcess","find","console","log","sheet","output","StyledHeader","AfterImage","TitleLink","LinkHome","ImageWrapper","StyledHelp","Help","StyledHelpButton","StyledHelpButtonWithHover","HelButton","Body","IgnoreList","Item","Text","VerticalGroup","Line","HelpSheet","func","href","rel","HelpEquation","StyledApp","Menu","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch","ReactDOM","render","setShowHelp","Space","Home","document","getElementById","URL","origin","addEventListener","fetch","status","headers","get","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.65093871.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/pickaxe.9907d5b7.svg\";","export const primaryColor = '#0064ff' // #0082ff\r\nexport const secondaryColor = '#0ccf35'\r\nexport const complementaryColor = '#fe8500'\r\n\r\nexport const yellow = '#FC0'\r\nexport const lightYellow = '#FC06'\r\n\r\nexport const lightGreen = `${secondaryColor}40`\r\nexport const extraLightGreen = `${secondaryColor}20`\r\n\r\nexport const lightOrange = '#ffe1b5'\r\nexport const extraLightOrange = '#ffebcdcc'\r\n\r\nexport const lightBlue = 'lightblue'\r\n\r\nexport const gray = '#888888'\r\nexport const lightGray = '#CCC'\r\nexport const extraLightGray = '#EEE'\r\n\r\nexport const backgroundColor = '#777'\r\n\r\nexport const materialColumnWidth = 168\r\n\r\nexport const materialIterationWidth = 80\r\n\r\nexport const inputFocus = extraLightGreen\r\nexport const inputShadow = `${lightGray}`\r\n\r\nexport const inputStyle = `\r\n    font-family: 'Ubuntu', sans-serif;\r\n    font-size: 1rem;\r\n    line-height: 1.2rem;\r\n    padding: 4px 6px;\r\n    border-radius: 4px;\r\n    width: 100%;\r\n    border: none;\r\n    box-shadow: 0px 0px 2px 2px ${inputShadow};\r\n    outline: none;\r\n    :focus {\r\n        background-color: ${inputFocus};\r\n    }\r\n`\r\n\r\nexport function buttonHover (message, offset) {\r\n    return `\r\n    :hover {\r\n        border: white 5px solid;\r\n        margin: -5px;\r\n        position: relative;\r\n        ::after {\r\n            box-shadow: 0px 3px 3px #CCC;\r\n            font-weight: bold;\r\n            content: \"${message}\";\r\n            position: absolute;\r\n            top: 45px;\r\n            right: ${offset}px;\r\n            background-color: white;\r\n            border-radius: 15px;\r\n            padding: 5px;\r\n            @media (max-width: 600px) {\r\n                right: 0px;\r\n            }\r\n        }\r\n    }\r\n`\r\n}\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport * as styles from 'styles'\r\n\r\nconst StyledMessage = styled.div`\r\n    min-height: 1px;\r\n    overflow: auto;\r\n    width: 100%;\r\n    text-align: center;\r\n`\r\n\r\nconst Title = styled.div`\r\n    font-size: 1.5rem;\r\n    margin-top: 10px;\r\n`\r\n\r\nconst StyledLine = styled.div`\r\n    padding-top: 8px;\r\n`\r\n\r\nconst StyledLink = styled.div`\r\n    margin: 20px;\r\n    a {\r\n        color: ${styles.primaryColor};\r\n    }\r\n`\r\n\r\nconst Overview = () => {\r\n    return (\r\n        <StyledMessage>\r\n            <br />\r\n            <br />\r\n            <Title style={{ fontWeight: 'bold' }}>Mathite</Title>\r\n            <br />\r\n            <br />\r\n            <StyledLine>{'A better way to solve problems.'}</StyledLine>\r\n            <br />\r\n            <br />\r\n            <StyledLine>{'What you always wanted from spreadsheets,'}</StyledLine>\r\n            <StyledLine>{'and what you wanted from databases,'}</StyledLine>\r\n            <StyledLine>{'without having to work for it.'}</StyledLine>\r\n            <br />\r\n            <br />\r\n            <br />\r\n            <StyledLine>{'Create functions'}</StyledLine>\r\n            <StyledLine>{'Once'}</StyledLine>\r\n            <StyledLine>{'Collaborate'}</StyledLine>\r\n            <StyledLine>{'Clean spaces'}</StyledLine>\r\n            <br />\r\n            <StyledLine>{'Own your work'}</StyledLine>\r\n            {/* <br />\r\n            <br />\r\n            <br />\r\n            <StyledLine>\r\n                <Link to='space'>Get started</Link>\r\n            </StyledLine> */}\r\n            <br />\r\n            <br />\r\n            <br />\r\n            <StyledLink>\r\n                <Link to='eq'>{'Create a reusable function'}</Link>\r\n            </StyledLink>\r\n            <StyledLink>\r\n                <Link to='sheet'>{'Use functions and create more'}</Link>\r\n            </StyledLink>\r\n            <br />\r\n            <br />\r\n            <br />\r\n            <br />\r\n            <br />\r\n            <br />\r\n            <StyledLink>\r\n                <Link to='draw'>{'Take a break to draw'}</Link>\r\n            </StyledLink>\r\n            <br />\r\n            <br />\r\n            <br />\r\n            <br />\r\n            {/* <StyledLink>\r\n                <Link to='data'>{'Test the data view'}</Link>\r\n            </StyledLink> */}\r\n        </StyledMessage>\r\n    )\r\n}\r\n\r\nexport default Overview\r\n","import React, { useEffect, useState, useRef } from 'react'\r\n\r\nexport default function Draw (props: {\r\n    imageDataUrl: Object,\r\n    setContext: Function,\r\n    style: Object,\r\n    height: number,\r\n    width: number,\r\n    penColor: string,\r\n    penWidth: string,\r\n    penType: string\r\n}) {\r\n    const {\r\n        imageDataUrl,\r\n        setContext,\r\n        style,\r\n        width,\r\n        height,\r\n        penColor,\r\n        penWidth,\r\n        penType\r\n    } = props\r\n    const [positionX, setPositionX] = useState()\r\n    const [positionY, setPositionY] = useState()\r\n    const [mouseDown, setMouseDown] = useState()\r\n\r\n    const sketchElement = useRef()\r\n\r\n    useEffect(() => {\r\n        const context = sketchElement.current.getContext('2d')\r\n        if (imageDataUrl) {\r\n            const img = new Image()\r\n            img.src = imageDataUrl\r\n            img.onload = () => {\r\n                context.drawImage(img, 0, 0)\r\n            }\r\n        }\r\n        setContext(context)\r\n    }, [imageDataUrl, setContext])\r\n\r\n    function drawMouseDown (event) {\r\n        setPositionAndDraw(event, false)\r\n        setMouseDown(true)\r\n    }\r\n\r\n    function drawMouseMove (event) {\r\n        if (mouseDown) {\r\n            setPositionAndDraw(event)\r\n        }\r\n    }\r\n\r\n    function drawMouseUp (event) {\r\n        setPositionAndDraw(event)\r\n        setMouseDown(false)\r\n    }\r\n\r\n    function drawMouseLeave () {\r\n        setMouseDown(false)\r\n    }\r\n\r\n    function drawWithState (canvas, x, y) {\r\n        drawLine(canvas, positionX, positionY, x, y)\r\n        setPositionX(x)\r\n        setPositionY(y)\r\n    }\r\n\r\n    function drawLine (canvas, startX, startY, endX, endY) {\r\n        const context = canvas.getContext('2d')\r\n        context.beginPath()\r\n        context.moveTo(startX, startY)\r\n        context.lineTo(endX, endY)\r\n        context.strokeStyle = penColor\r\n        context.lineWidth = penWidth\r\n        context.lineCap = penType\r\n        context.stroke()\r\n    }\r\n\r\n    function setPositionAndDraw (event, draw = true) {\r\n        const boundingRect = sketchElement.current.getBoundingClientRect()\r\n        if (event.changedTouches) {\r\n            Object.values(event.changedTouches).forEach(touch => {\r\n                const x = touch.clientX - boundingRect.left\r\n                const y = touch.clientY - boundingRect.top\r\n                if (draw) {\r\n                    drawWithState(sketchElement.current, x, y)\r\n                } else {\r\n                    setPositionX(x)\r\n                    setPositionY(y)\r\n                    sketchElement.current.focus()\r\n                    sketchElement.current.blur()\r\n                }\r\n            })\r\n        } else {\r\n            const x = event.pageX - boundingRect.left - window.pageXOffset\r\n            const y = event.pageY - boundingRect.top - window.pageYOffset\r\n            if (draw) {\r\n                drawWithState(sketchElement.current, x, y)\r\n            } else {\r\n                setPositionX(x)\r\n                setPositionY(y)\r\n            }\r\n        }\r\n        const context = sketchElement.current.getContext('2d')\r\n        setContext(context)\r\n    }\r\n\r\n    return (\r\n        <canvas ref={sketchElement}\r\n            style={Object.assign({}, { touchAction: 'none', outline: 'none' }, style)}\r\n            width={width}\r\n            height={height}\r\n            tabIndex={0}\r\n            onMouseMove={drawMouseMove}\r\n            onMouseDown={drawMouseDown}\r\n            onMouseUp={drawMouseUp}\r\n            onMouseLeave={drawMouseLeave}\r\n            onTouchStart={event => setPositionAndDraw(event, false)}\r\n            onTouchMove={setPositionAndDraw}\r\n            onTouchEnd={setPositionAndDraw}>\r\n        </canvas>\r\n    )\r\n}\r\n","import styled from 'styled-components'\r\nimport * as styles from 'styles'\r\n\r\nconst StyledInput = styled.input`\r\n    ${styles.inputStyle}\r\n`\r\n\r\nexport default StyledInput\r\n","import React, { useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport * as styles from 'styles'\r\nimport Draw from 'components/Draw'\r\nimport StyledInput from 'components/StyledInput'\r\n\r\nconst StyledDrawView = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    padding-top: 1rem;\r\n\r\n    canvas {\r\n        border: 1px lightblue solid;\r\n    }\r\n\r\n    input {\r\n        margin-left: 20px;\r\n        margin-right: 20px;\r\n        @media (max-width: 992px) {\r\n            margin-left: 4px;\r\n            margin-right: 4px;\r\n            width: 50px;\r\n        }\r\n    }\r\n`\r\n\r\nconst StyledDrawControls = styled.div`\r\n    position: fixed;\r\n    top: 1rem;\r\n    right: 0px;\r\n    max-width: 600px;\r\n    display: flex;\r\n`\r\n\r\nconst StyledLabel = styled.label`\r\n    margin: 5px;\r\n    white-space: nowrap;\r\n    width: 35px;\r\n    padding-right: 20px;\r\n`\r\n\r\nconst StyledNumberInput = styled(StyledInput)`\r\n    text-align: center;\r\n\r\n    :focus {\r\n        background-color: ${styles.extraLightGray};\r\n    }\r\n`\r\n\r\nconst StyledButton = styled(StyledInput)`\r\n    cursor: pointer;\r\n    width: 200px;\r\n\r\n    :focus {\r\n        background-color: #CCC;\r\n    }\r\n`\r\n\r\nexport default function DrawView (props) {\r\n    const [ context, setContext ] = useState()\r\n    const width = window.innerWidth - 30\r\n    const height = window.innerHeight > 500 ? window.innerHeight - 100 : window.innerHeight - 40\r\n    const [ penWidth, setPenWidth ] = useState()\r\n    const [ penColor, setPenColor ] = useState('#000000')\r\n\r\n    function clearImage () {\r\n        context.clearRect(0, 0, width, height)\r\n    }\r\n\r\n    function handleSetContext (context) {\r\n        setContext(context)\r\n        localStorage.setItem('imageDataUrl', context.canvas.toDataURL())\r\n    }\r\n\r\n    const imageDataUrl = localStorage.getItem('imageDataUrl')\r\n    return (\r\n        <StyledDrawView>\r\n            <StyledDrawControls>\r\n                <StyledButton\r\n                    className='btn'\r\n                    type='button'\r\n                    value='Clear'\r\n                    onClick={() => clearImage()} />\r\n                <StyledLabel>Pen Size:</StyledLabel>\r\n                <StyledNumberInput\r\n                    type='number'\r\n                    value={penWidth || ''}\r\n                    placeholder={1}\r\n                    onChange={event => setPenWidth(event.target.value)} />\r\n                <StyledInput\r\n                    type='color'\r\n                    value={penColor}\r\n                    onChange={event => setPenColor(event.target.value)} />\r\n            </StyledDrawControls>\r\n            <Draw\r\n                imageDataUrl={imageDataUrl}\r\n                width={width}\r\n                penType='round'\r\n                height={height}\r\n                penColor={penColor}\r\n                penWidth={penWidth || 1}\r\n                setContext={handleSetContext} />\r\n        </StyledDrawView>\r\n    )\r\n}\r\n","export function objectToHistory (obj: Object) {\r\n    const res = {}\r\n    if (typeof obj !== 'object') return obj\r\n    let hasProps = false\r\n    Object.keys(obj).forEach(prop => {\r\n        if (obj[prop] && (obj[prop].text || obj[prop].context || obj[prop].unit)) {\r\n            res[prop] = {}\r\n            res[prop].t = obj[prop].text\r\n            res[prop].u = obj[prop].unit\r\n            res[prop].c = objectToHistory(obj[prop].context)\r\n            if (res[prop].c || res[prop].t || res[prop].u) {\r\n                hasProps = true\r\n            }\r\n        }\r\n    })\r\n    if (!hasProps) return undefined\r\n    return res\r\n}\r\n\r\nexport function objectFromHistory (obj: Object) {\r\n    const res = {}\r\n    if (typeof obj !== 'object') return obj\r\n    Object.keys(obj).forEach(prop => {\r\n        res[prop] = {}\r\n        res[prop].text = obj[prop].t\r\n        res[prop].unit = obj[prop].u\r\n        res[prop].context = objectFromHistory(obj[prop].c)\r\n    })\r\n    return res\r\n}\r\n\r\nexport function urlToObject (url: String) {\r\n    return JSON.parse(decodeURI(url.replace(/^(\\/eq)*\\?/, '')).replace(/[\"~!@#$%&=]/g, '').replace(/`/g, '\"'))\r\n}\r\n\r\nexport function getEquationFromUrl (url: String) {\r\n    if (!url) {\r\n        return {}\r\n    }\r\n    const urlObject = urlToObject(url)\r\n    return {\r\n        text: urlObject.t || '',\r\n        unit: urlObject.u || '',\r\n        context: objectFromHistory(urlObject.c || {})\r\n    }\r\n}\r\n\r\nexport function columnSettingsToHistory (columnSettings) {\r\n    const newColumnSettings = {}\r\n    let somethingWasAdded = false\r\n    Object.keys(columnSettings).forEach(column => {\r\n        const newSetting = {}\r\n        let shouldAdd = false\r\n        if (columnSettings[column].start) {\r\n            shouldAdd = true\r\n            newSetting.s = columnSettings[column].start\r\n        }\r\n        if (columnSettings[column].interval) {\r\n            shouldAdd = true\r\n            newSetting.i = columnSettings[column].interval\r\n        }\r\n        if (shouldAdd) {\r\n            somethingWasAdded = true\r\n            newColumnSettings[column] = newSetting\r\n        }\r\n    })\r\n    if (somethingWasAdded) {\r\n        return newColumnSettings\r\n    } else {\r\n        return undefined\r\n    }\r\n}\r\n\r\nexport function columnSettingsFromHistory (columnSettings) {\r\n    const newColumnSettings = {}\r\n    Object.keys(columnSettings).forEach(column => {\r\n        const newSetting = {}\r\n        if (columnSettings[column].s) {\r\n            newSetting.start = columnSettings[column].s\r\n        }\r\n        if (columnSettings[column].i) {\r\n            newSetting.interval = columnSettings[column].i\r\n        }\r\n        newColumnSettings[column] = newSetting\r\n    })\r\n    return newColumnSettings\r\n}\r\n\r\nexport function getFromHistory (history: Object) {\r\n    const urlObject = history.location.search.length > 1 ? urlToObject(history.location.search) : {}\r\n    const generatorSettings = {}\r\n    if (urlObject.l) {\r\n        generatorSettings.left = urlObject.l\r\n    }\r\n    if (urlObject.r) {\r\n        generatorSettings.right = urlObject.r\r\n    }\r\n    return {\r\n        text: urlObject.t || '',\r\n        unit: urlObject.u || '',\r\n        context: objectFromHistory(urlObject.c || {}),\r\n        generatorSettings,\r\n        columnSettings: columnSettingsFromHistory(urlObject.s || {})\r\n    }\r\n}\r\n\r\nexport function passToHistory ({ history, text, context, unit, generatorSettings, columnSettings, pushToHistory = false }: { history: any, text: string, context: Object }) {\r\n    if (!text && !context) return history.replace()\r\n    const newContext = {}\r\n    if (text) {\r\n        newContext.t = text\r\n    }\r\n    if (unit) {\r\n        newContext.u = unit\r\n    }\r\n    if (context) {\r\n        newContext.c = objectToHistory(context)\r\n    }\r\n    if (generatorSettings) {\r\n        if (generatorSettings.left) {\r\n            if (parseInt(generatorSettings.left, 10) > 1000) {\r\n                newContext.l = 1000\r\n            } else {\r\n                newContext.l = generatorSettings.left\r\n            }\r\n        }\r\n        if (generatorSettings.right) {\r\n            if (parseInt(generatorSettings.right, 10) > 1000) {\r\n                newContext.r = 1000\r\n            } else {\r\n                newContext.r = generatorSettings.right\r\n            }\r\n        }\r\n        if (columnSettings) {\r\n            const newColumnSettings = columnSettingsToHistory(columnSettings)\r\n            if (newColumnSettings) {\r\n                newContext.s = newColumnSettings\r\n            }\r\n        }\r\n    }\r\n    const newContextString = JSON.stringify(newContext).replace(/[`~!@#$%&=_]/g, '').replace(/\"/g, '`')\r\n    if (newContextString !== '{}' && newContextString.length > 0) {\r\n        if (pushToHistory) {\r\n            return history.push('?' + newContextString)\r\n        } else {\r\n            return history.replace('?' + newContextString)\r\n        }\r\n    } else {\r\n        if (pushToHistory) {\r\n            return history.push()\r\n        } else {\r\n            return history.replace()\r\n        }\r\n    }\r\n}\r\n","export default function getColor (text: string): string {\r\n    let total = 0\r\n    for (var i = 0; i < text.length; i++) {\r\n        total += text.charCodeAt(i) * 16\r\n    }\r\n    if (total < 1000) {\r\n        total = 1000 - total\r\n    }\r\n    const color = {\r\n        r: total % 64 * 4,\r\n        g: 0,\r\n        b: 0\r\n    }\r\n    color.g = (total) % 128 * 2\r\n    color.b = (total) % 256\r\n\r\n    if (color.r > 96 && color.g > 96 && color.b > 96) {\r\n        // If the colors are all high it will be too light\r\n        switch (Math.max(color.r, color.g, color.b)) {\r\n        case color.r:\r\n            color.g -= 96\r\n            color.b -= 96\r\n            break\r\n        case color.g:\r\n            color.r -= 96\r\n            color.b -= 96\r\n            break\r\n        case color.b:\r\n            color.r -= 96\r\n            color.g -= 96\r\n            break\r\n        default:\r\n            break\r\n        }\r\n    } else if (color.r < 128 && color.g < 128 && color.b < 128) {\r\n        // If the colors are all too low it will be too dark\r\n        switch (Math.max(color.r, color.g, color.b)) {\r\n        case color.r:\r\n            color.r += 128\r\n            break\r\n        case color.g:\r\n            color.g += 128\r\n            break\r\n        case color.b:\r\n            color.b += 128\r\n            break\r\n        default:\r\n            break\r\n        }\r\n    } else if ((color.r % color.g + color.g % color.b + color.b % color.r) < 256) {\r\n        // If the colors are all too close together it will be gray\r\n        switch (Math.max(color.r, color.g, color.b)) {\r\n        case color.r:\r\n            color.r = color.r % 128 + 128\r\n            break\r\n        case color.g:\r\n            color.g = color.g % 128 + 128\r\n            break\r\n        case color.b:\r\n            color.b = color.b % 128 + 128\r\n            break\r\n        default:\r\n            break\r\n        }\r\n    }\r\n    return rgbToHex(color.r, color.g, color.b)\r\n}\r\n\r\nfunction rgbToHex (r, g, b): string {\r\n    return '#' + intToHex(r) + intToHex(g) + intToHex(b)\r\n}\r\n\r\nfunction intToHex (c: any): string {\r\n    var hex = c.toString(16)\r\n    return hex.length === 1 ? '0' + hex : hex\r\n}\r\n","const ignoreList = [\r\n    'undefined',\r\n    'e',\r\n    'Infinity',\r\n    'LN2',\r\n    'LN10',\r\n    'log',\r\n    'LOG2E',\r\n    'LOG10E',\r\n    'pi',\r\n    'phi',\r\n    'sqrt',\r\n    'sqrt2',\r\n    'tau',\r\n    'abs',\r\n    'cbrt',\r\n    'ceil',\r\n    'cube',\r\n    'exp',\r\n    'fix',\r\n    'floor',\r\n    'gcd',\r\n    'hypot',\r\n    'lcm',\r\n    'log10',\r\n    'mod',\r\n    'norm',\r\n    'nthroot',\r\n    'pow',\r\n    'round',\r\n    'sign',\r\n    'mad',\r\n    'max',\r\n    'mean',\r\n    'median',\r\n    'min',\r\n    'mode',\r\n    'prod',\r\n    'std',\r\n    'sum',\r\n    'var',\r\n    'acos',\r\n    'acosh',\r\n    'acot',\r\n    'acoth',\r\n    'acsc',\r\n    'acsch',\r\n    'asec',\r\n    'asech',\r\n    'asin',\r\n    'asinh',\r\n    'atan',\r\n    'atan2',\r\n    'atanh',\r\n    'cos',\r\n    'cosh',\r\n    'cot',\r\n    'coth',\r\n    'csc',\r\n    'csch',\r\n    'sec',\r\n    'sech',\r\n    'sin',\r\n    'sinh',\r\n    'tan',\r\n    'tanh'\r\n]\r\n\r\nexport default ignoreList\r\n","import getColor from './getColor'\r\nimport ignoreList from './ignoreList'\r\n\r\nexport function mathmlWrapper ({ title, text }: { title: string, text: string }): string {\r\n    return `<math title=\"${title}\">${text.replace(/_/g, '')}</math>`\r\n}\r\n\r\nexport function colorVariable ({ text, variable }: { text: string, variable: string }): string {\r\n    let res = text\r\n    let varText = variable\r\n    const shouldSub = variableSubscript({ variable })\r\n    if (shouldSub.subscript) {\r\n        res = res.replace(findVarRegex({ variable }), `$1<msub><mi mathcolor=\"${getColor(variable)}\">${shouldSub.variable}_</mi><mn mathcolor=\"${getColor(variable)}\">${shouldSub.subscript}</mn></msub>$3`)\r\n    } else {\r\n        res = res.replace(findVarRegex({ variable }), `$1<mrow><mi mathcolor=\"${getColor(variable)}\">${varText}</mi></mrow>$3`)\r\n    }\r\n    return res\r\n}\r\n\r\nexport function variableSubscript ({ variable }: { variable: string}) {\r\n    const subMatch = variable.match(/([0-9]+)$/)\r\n    if (subMatch) {\r\n        return {\r\n            variable: variable.slice(0, variable.length - subMatch[1].length),\r\n            subscript: subMatch[1]\r\n        }\r\n    }\r\n    return { variable }\r\n}\r\n\r\nexport function findVarRegex ({ variable }: { variable: string }) {\r\n    return new RegExp(`(^|[^A-Za-z0-9 _])(${removeSpace({ text: variable })})([^A-Za-z0-9 _]|$)`, 'g')\r\n}\r\n\r\nexport function expandVariableWithColor ({ text, variable, expanded }: {text: string, variable: string, expanded: string}): string {\r\n    let varText = variable\r\n    const shouldSub = variableSubscript({ variable })\r\n    if (shouldSub.subscript) {\r\n        varText = `<msub><mi>${shouldSub.variable}_</mi><mn>${shouldSub.subscript}</mn></msub>`\r\n    }\r\n    return text.replace(findVarRegex({ variable }), '$1' + mathmlTable({\r\n        color: getColor(variable),\r\n        rows: [\r\n            [varText],\r\n            [`<mo>(</mo>${expanded}<mo>)</mo>`]\r\n        ]\r\n    }) + '$3')\r\n}\r\n\r\nexport function mathmlTable ({ color, rows }: { color: string, rows: Array<Array<string>>}): string {\r\n    return `<mtable mathcolor=\"${color}\">${rows.reduce((acc, row) => `${acc}<mtr>${row.reduce((cellAcc, cell) => {\r\n        return `${cellAcc}<mtd><mrow>${addMiMaybe({ text: cell })}</mrow></mtd>`\r\n    }, '')}</mtr>`, '')}</mtable>`\r\n}\r\n\r\nexport function addMiMaybe ({ text }: { text: string }): string {\r\n    if (!new RegExp(/^<.*>$/).test(text)) {\r\n        return `<mi>${text}</mi>`\r\n    } else {\r\n        return text\r\n    }\r\n}\r\n\r\nexport function extrapolateMathml ({ text }: { text: string }): string {\r\n    let res = text\r\n    res = padNumbers({ text: res })\r\n    res = removeSpace({ text: res })\r\n    res = padOperators({ text: res })\r\n    res = padSpecial({ text: res })\r\n    res = beautifyGlobal({ text: res, global: 'sqrt', rightTag: 'msqrt' })\r\n    res = beautifyGlobal({\r\n        text: res,\r\n        global: '<mo>&divide;</mo>',\r\n        cutoffChars: ['+', '-', ')', '*'],\r\n        cutoffCharsReverse: ['+', '-', '*', '/', '('],\r\n        masterOpen: '<mstyle displaystyle=\"true\"><mfrac>',\r\n        masterClose: '</mfrac></mstyle>',\r\n        leftTag: 'mrow',\r\n        rightTag: 'mrow'\r\n    })\r\n    res = padParentheses({ text: res })\r\n    res = padIgnoreList({ text: res })\r\n    return res\r\n}\r\n\r\nexport function padNumbers ({ text }: { text: string }): string {\r\n    let res = text\r\n    res = res.replace(/(^|[^A-Za-z0-9 ])([0-9]+)/g, '$1<mo>$2</mo>')\r\n    return res\r\n}\r\n\r\nexport function removeSpace ({ text }: { text: string }): string {\r\n    let res = text\r\n    res = res.replace(/(^|[^A-Za-z0-9])( +)($|[^A-Za-z0-9])/g, '$1$3')\r\n    res = res.replace(/(^|[A-Za-z0-9])( +)($|[^A-Za-z0-9])/g, '$1$3')\r\n    res = res.replace(/(^|[^A-Za-z0-9])( +)($|[A-Za-z0-9])/g, '$1$3')\r\n    res = res.replace(/(^|[^A-Za-z0-9])( +)($|[^A-Za-z0-9])/g, '$1$3')\r\n    return res\r\n}\r\n\r\nexport function padOperators ({ text }: { text: string}): string {\r\n    const operators = ['\\\\+', '-', '/', '\\\\*']\r\n    const operatorValue = {\r\n        '\\\\+': '&plus;',\r\n        '-': '&minus;',\r\n        '/': '&divide;',\r\n        '\\\\*': '&times;'\r\n    }\r\n    return operators.reduce((acc, operator) => {\r\n        let response = acc\r\n        response = response.replace(new RegExp(`([^</*-+])${operator}`, 'g'), `$1<mo>${operatorValue[operator]}</mo>`) // replace\r\n        return response\r\n    }, text)\r\n}\r\n\r\nexport function padSpecial ({ text }: { text: string }): string {\r\n    let res = text\r\n    res = res.replace(/([^A-Za-z0-9<>/;#\"'= &()])/g, '<mo>$1</mo>') // replace the rest of the unknown elements\r\n    return res\r\n}\r\n\r\n/*\r\n    global: the text to search for\r\n    rightTag: the tag to surround the extent of parentheses to the right of the global\r\n    leftTag: the tag to surround the extent of parentheses to the left of the global\r\n*/\r\nexport function beautifyGlobal ({\r\n    text,\r\n    global,\r\n    cutoffChars = [],\r\n    cutoffCharsReverse = [],\r\n    masterOpen = '',\r\n    masterClose = '',\r\n    rightTag = '',\r\n    leftTag = ''\r\n}: {\r\n    text: string,\r\n    global: string,\r\n    cutoffChars?: Array<string>,\r\n    cutoffCharsReverse?: Array<string>,\r\n    masterOpen?: string,\r\n    masterClose?: string,\r\n    rightTag?: string,\r\n    leftTag?: string\r\n}): string {\r\n    let res = text\r\n    const hasLeftTag = leftTag.length > 0\r\n    const hasRightTag = rightTag.length > 0\r\n    res = protectConverted({ text: res })\r\n    let segments = splitGlobal({ text: res, global })\r\n    while (segments.length > 1) {\r\n        let endAllLeft\r\n        let endAllRight\r\n        const extentLeft = getParenthesesExtent({ text: segments[0], cutoffChars: cutoffCharsReverse, reverse: true })\r\n        const extentRight = getParenthesesExtent({ text: segments[1], cutoffChars })\r\n        const { left, right } = stripExtraParentheses({ left: extentLeft, right: extentRight })\r\n        const semiTrimmedLeft = trimParentheses({ text: left })\r\n        const semiTrimmedRight = trimParentheses({ text: right })\r\n        endAllLeft = trimOpenParentheses({ left: semiTrimmedLeft, right: semiTrimmedRight })\r\n        endAllRight = trimCloseParentheses({ left: semiTrimmedLeft, right: semiTrimmedRight })\r\n\r\n        const nestedLeftSplit = splitGlobal({ text: endAllLeft, global })\r\n        const nestedRightSplit = splitGlobal({ text: endAllRight, global })\r\n        if (nestedLeftSplit.length > 1) {\r\n            endAllLeft = beautifyGlobal({ text: endAllLeft, global, cutoffChars, cutoffCharsReverse, masterOpen, masterClose, rightTag, leftTag })\r\n        }\r\n        if (nestedRightSplit.length > 1) {\r\n            endAllRight = beautifyGlobal({ text: endAllRight, global, cutoffChars, cutoffCharsReverse, masterOpen, masterClose, rightTag, leftTag })\r\n        }\r\n\r\n        const mathml = `${masterOpen}${hasLeftTag ? `<${leftTag}>${endAllLeft}</${leftTag}>` : endAllLeft}${hasRightTag ? `<${rightTag}>${endAllRight}</${rightTag}>` : endAllRight}${masterClose}`\r\n        res = res.replace(left + global + right, mathml)\r\n        res = protectConverted({ text: res })\r\n        segments = splitGlobal({ text: res, global })\r\n    }\r\n    res = revealConverted({ text: res })\r\n    return res\r\n}\r\n\r\nexport function protectConverted ({ text }: { text: string }): string {\r\n    let res = text\r\n    specials.forEach((special, index) => {\r\n        res = res.replace(new RegExp(special, 'g'), `_${index}_`)\r\n    })\r\n    return res\r\n}\r\n\r\nconst specials = [\r\n    'msqrt'\r\n]\r\n\r\nexport function splitGlobal ({ text, global }: { text: string, global: string }) {\r\n    const regex = new RegExp(`(.*)${global}(.*)`)\r\n    const match = text.match(regex)\r\n    if (match && match.length > 1) {\r\n        return [match[1], match[2]]\r\n    }\r\n    return []\r\n}\r\n\r\nexport function getParenthesesExtent (\r\n    { text, open = 0, reverse = false, cutoffChars = [] }:\r\n    { text: string, open?: number, reverse?: boolean, cutoffChars?: Array<string> }\r\n): string {\r\n    if (!text) return ''\r\n    if (!reverse) {\r\n        let match = text.match(/^([^()]*)([()])/)\r\n        if (!match || match.length === 0) {\r\n            if (shouldCutoff({ text, open, cutoffChars })) {\r\n                return cutoff({ text, cutoffChars, reverse })\r\n            }\r\n            return text\r\n        }\r\n\r\n        const firstMatch = match[0]\r\n        const textMatch = match[1]\r\n        const parenthesesMatch = match[2]\r\n\r\n        if (shouldCutoff({ text: textMatch, open, cutoffChars })) {\r\n            return cutoff({ text: textMatch, cutoffChars, reverse })\r\n        }\r\n        let slice = text.slice(firstMatch.length)\r\n        if (parenthesesMatch === '(') {\r\n            return firstMatch + getParenthesesExtent({ text: slice, open: open + 1, reverse, cutoffChars })\r\n        } else {\r\n            if (open <= 1) {\r\n                return firstMatch\r\n            }\r\n            return firstMatch + getParenthesesExtent({ text: slice, open: open - 1, reverse, cutoffChars })\r\n        }\r\n    } else {\r\n        let match = text.match(/([()])([^()]*)$/)\r\n        if (!match || match.length === 0) {\r\n            if (shouldCutoff({ text, open, cutoffChars })) {\r\n                return cutoff({ text, cutoffChars, reverse })\r\n            }\r\n            return text\r\n        }\r\n\r\n        const firstMatch = match[0]\r\n        const textMatch = match[2]\r\n        const parenthesesMatch = match[1]\r\n\r\n        if (shouldCutoff({ text: textMatch, open, cutoffChars })) {\r\n            return cutoff({ text: textMatch, cutoffChars, reverse })\r\n        }\r\n        let slice = text.slice(0, text.length - firstMatch.length)\r\n        if (parenthesesMatch === ')') {\r\n            return getParenthesesExtent({ text: slice, open: open + 1, reverse, cutoffChars }) + firstMatch\r\n        } else {\r\n            if (open <= 1) {\r\n                return firstMatch\r\n            }\r\n            return getParenthesesExtent({ text: slice, open: open - 1, reverse, cutoffChars }) + firstMatch\r\n        }\r\n    }\r\n}\r\n\r\nexport function shouldCutoff ({ text, cutoffChars, open }: { text: string, cutoffChars: Array<string>, open: number}): boolean {\r\n    const filteredCutoffChars = cutoffChars.filter(filterCutoffChars)\r\n    if (open === 0 && cutoffChars.includes('/')) {\r\n        if (/<\\/mfrac><\\/mstyle>/.test(text) || /<mo>&divide;<\\/mo>/.test(text)) {\r\n            return true\r\n        }\r\n    }\r\n    if (open === 0 && cutoffChars.includes('*')) {\r\n        if (/<mo>&times;<\\/mo>/.test(text)) {\r\n            return true\r\n        }\r\n    }\r\n    if (open === 0 && filteredCutoffChars.length > 0 && new RegExp(`[\\\\${filteredCutoffChars.join('\\\\')}]`, 'g').test(maskCutoffWhiteList({ text }))) {\r\n        return true\r\n    }\r\n    return false\r\n}\r\n\r\nexport function maskCutoffWhiteList ({ text }: { text: string }): string {\r\n    let res = text\r\n    Object.keys(cutoffWhiteList).forEach(key => {\r\n        res = res.replace(new RegExp(key, 'g'), cutoffWhiteList[key])\r\n    })\r\n    return res\r\n}\r\n\r\nconst cutoffWhiteList = {\r\n    '<mo>&plus;</mo>': '+',\r\n    '<mo>&minus;</mo>': '-',\r\n    '<mo>&times;</mo>': '*'\r\n}\r\n\r\nexport function filterCutoffChars (cutoffChar: string) {\r\n    return whiteListCutoffChars.includes(cutoffChar)\r\n}\r\n\r\nexport const whiteListCutoffChars = [\r\n    '+',\r\n    '-',\r\n    '*',\r\n    '(',\r\n    ')'\r\n]\r\n\r\nexport function cutoff ({ text, cutoffChars, reverse }: { text: string, cutoffChars: Array<string>, reverse?: boolean}) {\r\n    const filteredCutoffChars = cutoffChars.filter(filterCutoffChars)\r\n    const maskedText = maskCutoffWhiteList({ text })\r\n    let remainingRegex\r\n    let divideCutoffRegex\r\n    let alternateDivideCutoffRegex\r\n    if (reverse) {\r\n        remainingRegex = new RegExp(`[\\\\${filteredCutoffChars.join('\\\\')}]([^\\\\${filteredCutoffChars.join('\\\\')}]+)$`)\r\n        divideCutoffRegex = new RegExp(`<mo>&divide;</mo>([^\\\\${filteredCutoffChars.join('\\\\')}]+)$`)\r\n        alternateDivideCutoffRegex = new RegExp(`</mfrac></mstyle>([^\\\\${filteredCutoffChars.join('\\\\')}]+)$`)\r\n    } else {\r\n        remainingRegex = new RegExp(`^([^\\\\${filteredCutoffChars.join('\\\\')}]+)[\\\\${filteredCutoffChars.join('\\\\')}]`)\r\n        divideCutoffRegex = new RegExp(`^([^\\\\${filteredCutoffChars.join('\\\\')}]+)<mo>&divide;</mo>`)\r\n        alternateDivideCutoffRegex = new RegExp(`^([^\\\\${filteredCutoffChars.join('\\\\')}]+)<mstyle displaystyle=\"true\"><mfrac>`)\r\n    }\r\n\r\n    const cutoffMatch = maskedText.match(remainingRegex)\r\n    const cutoffDivideMatch = maskedText.match(divideCutoffRegex)\r\n    const cutoffAlternateDivideMatch = maskedText.match(alternateDivideCutoffRegex)\r\n\r\n    let res = ''\r\n    if (cutoffMatch) {\r\n        res = cutoffMatch[1]\r\n    }\r\n    if (cutoffDivideMatch) {\r\n        // Should only enter here if we're dealing with the preceding part of a divide\r\n        if (!res || cutoffDivideMatch[1].length < res.length) {\r\n            res = cutoffDivideMatch[1]\r\n        }\r\n    }\r\n    if (cutoffAlternateDivideMatch) {\r\n        // Should only enter here if we're dealing with the preceding part of a divide\r\n        if (!res || cutoffAlternateDivideMatch[1].length < res.length) {\r\n            res = cutoffAlternateDivideMatch[1]\r\n        }\r\n    }\r\n    return unmaskCutoffWhiteList({ text: res })\r\n}\r\n\r\nexport function unmaskCutoffWhiteList ({ text }: { text: string }): string {\r\n    let res = text\r\n    Object.keys(cutoffWhiteList).forEach(key => {\r\n        res = res.replace(new RegExp('\\\\' + cutoffWhiteList[key], 'g'), key)\r\n    })\r\n    return res\r\n}\r\n\r\nexport function stripExtraParentheses ({ left, right }: { left: string, right: string }) {\r\n    // Remove unmatched preceding or trailing parentheses\r\n    const leftHasPreceding = /^\\(/.test(left)\r\n    const rightHasPreceding = /^\\(/.test(right)\r\n    const leftHasTrailing = /\\)$/.test(left)\r\n    const rightHasTrailing = /\\)$/.test(right)\r\n    if (leftHasPreceding && !leftHasTrailing && !rightHasPreceding && !rightHasTrailing) {\r\n        return { left: left.replace(/^\\(/, ''), right }\r\n    }\r\n    if (!leftHasPreceding && !leftHasTrailing && !rightHasPreceding && rightHasTrailing) {\r\n        return { left, right: right.replace(/\\)$/, '') }\r\n    }\r\n    return { left, right }\r\n}\r\n\r\nexport function trimParentheses ({ text }: { text: string }): string {\r\n    return text.replace(/^\\((.*)\\)$/g, '$1')\r\n}\r\n\r\nexport function trimOpenParentheses ({ left, right }: { left: string, right: string }): string {\r\n    if (/\\)$/.test(right)) {\r\n        return left.replace(/^\\(/g, '')\r\n    }\r\n    return left\r\n}\r\n\r\nexport function trimCloseParentheses ({ left, right }: { left: string, right: string }): string {\r\n    if (/^\\(/.test(left)) {\r\n        return right.replace(/\\)$/g, '')\r\n    }\r\n    return right\r\n}\r\n\r\nexport function padParentheses ({ text }: { text: string }): string {\r\n    let res = text\r\n    res = res.replace(/^(.{0,3})([()])/g, '$1<mo>$2</mo>') // replace at the beginning\r\n    res = res.replace(/([()])([^()]{0,4})$/g, '<mo>$1</mo>$2') // replace at the end\r\n    res = res.replace(/([()])(?!<\\/mo>)/g, '<mo>$1</mo>')\r\n    return res\r\n}\r\n\r\nexport function revealConverted ({ text }: { text: string }): string {\r\n    let res = text\r\n    specials.forEach((special, index) => {\r\n        res = res.replace(new RegExp(`_${index}_`, 'g'), special)\r\n    })\r\n    return res\r\n}\r\n\r\nexport function padIgnoreList ({ text }: { text: string }): string {\r\n    let res = text\r\n    ignoreList.forEach(item => {\r\n        res = res.replace(new RegExp(`(^|[^A-Za-z0-9])(${item})($|[^A-Za-z0-9])`, 'g'), '$1<mo>$2</mo>$3')\r\n    })\r\n    return res\r\n}\r\n","import { evaluate } from 'mathjs'\r\nimport ignoreList from './ignoreList'\r\nimport { extrapolateMathml, expandVariableWithColor, colorVariable } from './mathml'\r\n\r\nconst circularDependencyError = 'Circular dependency detected'\r\n\r\nexport const variableRegex = /([A-Za-z]([A-Za-z0-9 ]*[A-Za-z0-9])*)/g\r\n\r\n// parses the text and returns identified variables\r\nexport function getVariables ({\r\n    text,\r\n    useIgnoreList = true\r\n}: {\r\n    text: string,\r\n    useIgnoreList?: boolean\r\n}): Array<string> {\r\n    if (!text) return []\r\n    const matches = text.match(variableRegex)\r\n    if (!matches) return []\r\n    const uniqueMatches = matches.reduce((prev, curr) => {\r\n        if (!prev.includes(curr)) {\r\n            return [...prev, curr]\r\n        } else {\r\n            return prev\r\n        }\r\n    }, [])\r\n\r\n    if (!useIgnoreList) return uniqueMatches\r\n\r\n    return uniqueMatches.reduce((prev, curr) => {\r\n        if (!ignoreList.includes(curr)) {\r\n            return [...prev, curr]\r\n        } else {\r\n            return prev\r\n        }\r\n    }, [])\r\n}\r\n\r\nexport function recursiveSolve ({\r\n    text = '',\r\n    unit,\r\n    context,\r\n    inheritedContext,\r\n    parents = []\r\n}: {\r\n    text: string,\r\n    context: Object,\r\n    inheritedContext: Object,\r\n    parents: Array<string>\r\n}): {\r\n        text: string,\r\n        unit: string,\r\n        context: Object,\r\n        resolution: { solution?: string, special?: string, error?: string},\r\n        solvableEquation: string,\r\n        mathml?: string,\r\n        missingContext: Array<string>,\r\n        requiredContext: Array<string>,\r\n        fullMissingContext: Array<string>\r\n    } {\r\n    let solvableEquation = text\r\n    let mathml = extrapolateMathml({ text })\r\n    const missingContext = []\r\n    const fullMissingContext = []\r\n    const variables: any = getVariables({ text })\r\n    const requiredContext = [...variables]\r\n    const solvableContext = { ...context }\r\n    const response = {\r\n        text,\r\n        unit,\r\n        missingContext,\r\n        fullMissingContext,\r\n        requiredContext,\r\n        context: solvableContext\r\n    }\r\n    const resolution = parents.reduce((error, parent) => {\r\n        if (error.error === circularDependencyError || variables.includes(parent)) {\r\n            return { error: circularDependencyError }\r\n        }\r\n        return error\r\n    }, {})\r\n    if (resolution.error) {\r\n        return {\r\n            ...response,\r\n            resolution,\r\n            solvableEquation,\r\n            mathml\r\n        }\r\n    }\r\n    variables.sort((a, b) => b.length - a.length).forEach(variable => {\r\n        if (solvableContext[variable] && solvableContext[variable].text) {\r\n            const usableContextVariable = solvableContext[variable] || inheritedContext[variable]\r\n            const prepared = recursiveSolve({\r\n                text: usableContextVariable.text,\r\n                unit: usableContextVariable.unit,\r\n                context: usableContextVariable.context,\r\n                inheritedContext: { ...inheritedContext, ...solvableContext },\r\n                parents: [...parents, variable]\r\n            })\r\n            fullMissingContext.push(...prepared.fullMissingContext)\r\n            if (prepared.resolution.error === circularDependencyError) {\r\n                resolution.error = circularDependencyError\r\n                return\r\n            }\r\n            solvableContext[variable] = prepared\r\n            solvableEquation = solvableEquation.replace(new RegExp(variable, 'g'), '(' + prepared.solvableEquation + ')')\r\n            if (prepared.mathml && variableRegex.test(prepared.mathml)) {\r\n                mathml = expandVariableWithColor({ text: mathml, variable, expanded: prepared.mathml })\r\n            } else {\r\n                mathml = colorVariable({ text: mathml, variable })\r\n            }\r\n        } else if (inheritedContext && inheritedContext[variable] && inheritedContext[variable].solvableEquation !== undefined) {\r\n            solvableEquation = solvableEquation.replace(new RegExp(variable, 'g'), '(' + inheritedContext[variable].solvableEquation + ')')\r\n            mathml = colorVariable({ text: mathml, variable })\r\n        } else if (inheritedContext && inheritedContext[variable] && !inheritedContext[variable].text) {\r\n            solvableEquation = solvableEquation.replace(new RegExp(variable, 'g'), '(' + inheritedContext[variable] + ')')\r\n            mathml = colorVariable({ text: mathml, variable })\r\n            fullMissingContext.push(variable)\r\n        } else {\r\n            missingContext.push(variable)\r\n            fullMissingContext.push(variable)\r\n            mathml = colorVariable({ text: mathml, variable })\r\n        }\r\n    })\r\n    if (resolution.error) {\r\n        return {\r\n            ...response,\r\n            resolution,\r\n            solvableEquation,\r\n            mathml\r\n        }\r\n    }\r\n    return {\r\n        ...response,\r\n        resolution: solve({ text: solvableEquation, solvableEquation }),\r\n        solvableEquation,\r\n        mathml\r\n    }\r\n}\r\n\r\n// Context in this case is simply an object with variableNames as properties with the values that should be used\r\nexport function solveWithAddedContext ({ text, simpleContext }: { text: string, simpleContext: Object }): {\r\n    solution?: string, special?: string, error?: string, missingContext?: Array<string>\r\n} {\r\n    let res = text\r\n    const variableNames = getVariables({ text })\r\n    variableNames.sort((a, b) => b.length - a.length).forEach(variable => {\r\n        res = res.replace(new RegExp(variable, 'g'), `(${simpleContext[variable]})`)\r\n    })\r\n    return solve({ text: res })\r\n}\r\n\r\nexport function solve ({\r\n    text\r\n}: {\r\n    text: string\r\n}): {\r\n    solution?: string, special?: string, error?: string, missingContext?: Array<string>\r\n} {\r\n    if (!text || text.length === 0) {\r\n        return {}\r\n    }\r\n    let solution\r\n    const missingContext = getVariables({ text })\r\n    if (missingContext.length > 0) {\r\n        return { error: 'Missing context', missingContext }\r\n    }\r\n    try {\r\n        solution = evaluate(text)\r\n    } catch (error) {\r\n        return { error }\r\n    }\r\n    if (solution !== undefined && isNaN(parseFloat(solution))) return { error: 'Error. Not a number.' }\r\n    if (solution.im) {\r\n        return {\r\n            solution: solution.im,\r\n            special: 'im'\r\n        }\r\n    }\r\n    return { solution }\r\n}\r\n\r\nexport function stripContext (context: Object) {\r\n    const res = {}\r\n    if (typeof context !== 'object') {\r\n        return context\r\n    }\r\n    let hasProps = false\r\n    Object.keys(context).forEach(prop => {\r\n        if (context[prop] && (context[prop].text || context[prop].unit || context[prop].context)) {\r\n            res[prop] = {}\r\n            res[prop].text = context[prop].text\r\n            res[prop].unit = context[prop].unit\r\n            res[prop].context = stripContext(context[prop].context)\r\n            if (res[prop].context || res[prop].text || res[prop].unit) {\r\n                hasProps = true\r\n            }\r\n        }\r\n    })\r\n    if (!hasProps) {\r\n        return undefined\r\n    }\r\n    return res\r\n}\r\n\r\nexport function formatNumber (number) {\r\n    if (number && number.toString) {\r\n        const str = number.toString()\r\n        if (/\\./.test(str)) {\r\n            const parts = str.split('.')\r\n            return parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',') + '.' + parts[1]\r\n        } else {\r\n            return str.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\r\n        }\r\n    } else {\r\n        return number\r\n    }\r\n}\r\n","import { useEffect, useState } from 'react'\r\n\r\nexport function getLocalStorage (key) {\r\n    const localString = localStorage.getItem(key)\r\n    return JSON.parse(localString)\r\n}\r\n\r\nexport function setLocalStorage (key, value) {\r\n    const valueString = JSON.stringify(value)\r\n    localStorage.setItem(key, valueString)\r\n}\r\n\r\nexport function useLocalStorage (defaultValue, key) {\r\n    const [state, setState] = useState(defaultValue)\r\n\r\n    useEffect(() => {\r\n        const value = getLocalStorage(key)\r\n        if (value !== undefined && value !== null) {\r\n            setState(value)\r\n        }\r\n    }, [key])\r\n\r\n    return [\r\n        state,\r\n        newValue => {\r\n            setLocalStorage(key, newValue)\r\n            setState(newValue)\r\n        }\r\n    ]\r\n}\r\n","import React, { Component } from 'react'\r\nimport { mathmlWrapper } from 'utils/math/mathml'\r\nimport styled from 'styled-components'\r\n\r\ninterface Props {\r\n    mathml: string,\r\n    title: string\r\n}\r\n\r\nconst StyledMathML = styled.div`\r\n    text-align: center;\r\n    padding: 10px;\r\n    overflow-x: auto;\r\n    overflow-y: hidden;\r\n`\r\n\r\nclass MathML extends Component<Props, {}> {\r\n    componentDidMount () {\r\n        // MathJax.Hub.Queue(['Typeset', MathJax.Hub]) // eslint-disable-line\r\n        if (typeof MathJax !== 'undefined') { // eslint-disable-line\r\n            MathJax.typesetPromise() // eslint-disable-line\r\n        }\r\n    }\r\n\r\n    componentDidUpdate () {\r\n        // MathJax.Hub.Queue(['Typeset', MathJax.Hub]) // eslint-disable-line\r\n        if (typeof MathJax !== 'undefined') { // eslint-disable-line\r\n            MathJax.typesetClear() // eslint-disable-line\r\n            MathJax.typesetPromise() // eslint-disable-line\r\n        }\r\n    }\r\n\r\n    render () {\r\n        const { mathml, title } = this.props\r\n\r\n        return (\r\n            <StyledMathML dangerouslySetInnerHTML={{ __html: (mathmlWrapper({ title, text: mathml })) }} />\r\n        )\r\n    }\r\n}\r\n\r\nexport default MathML\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport getColor from 'utils/math/getColor'\r\nimport { getVariables, formatNumber } from 'utils/math'\r\nimport StyledInput from 'components/StyledInput'\r\n\r\nconst StyledContainer = styled.div`\r\n    display: flex;\r\n`\r\n\r\nconst Label = styled.span`\r\n    font-weight: bold;\r\n`\r\n\r\nfunction getNewContext ({ previousText, text, context }) {\r\n    const newContext = { ...context }\r\n    const previousVariables = getVariables({ text: previousText })\r\n    const nextVariables = getVariables({ text })\r\n    // if there is only one difference between the list of previous and next variables use the old value as the new\r\n    const unusedPrevious = previousVariables.filter(i => !nextVariables.includes(i))\r\n    const unusedNext = nextVariables.filter(i => !previousVariables.includes(i))\r\n    if (newContext) {\r\n        if (unusedPrevious.length === 1 && unusedNext.length === 1 && unusedPrevious[0]) {\r\n            newContext[unusedNext[0]] = newContext[unusedPrevious[0]]\r\n            delete newContext[unusedPrevious[0]]\r\n        } else {\r\n            // clear unused context\r\n            Object.keys(newContext).forEach(variable => {\r\n                if (!nextVariables.includes(variable)) {\r\n                    delete newContext[variable]\r\n                }\r\n            })\r\n        }\r\n    }\r\n    return newContext\r\n}\r\n\r\nfunction NestedProperty ({ id, variable, info, onChange }: {\r\n    id: string,\r\n    variable: string,\r\n    info: {\r\n        resolution: { solution?: string, special?: string, error?: string},\r\n        name: string,\r\n        text: string,\r\n        unit: string,\r\n        context: Object,\r\n        inheritedContext: Object,\r\n        missingContext: Array<string>,\r\n        requiredContext: Array<string>\r\n    },\r\n    onChange: Function\r\n}) {\r\n    const newInfo = {\r\n        resolution: {},\r\n        text: '',\r\n        unit: '',\r\n        missingContext: [],\r\n        requiredContext: [],\r\n        ...info.context[variable],\r\n        inheritedContext: { ...info.inheritedContext, ...info.context },\r\n        name: variable\r\n    }\r\n    return (\r\n        <ObjectProperty\r\n            id={`${id}-${variable}`}\r\n            info={newInfo}\r\n            onChange={({ name, text, unit, context }) => {\r\n                const copyContext = { ...info.context }\r\n                if (!copyContext[name]) copyContext[name] = {}\r\n                copyContext[name].context = context\r\n                copyContext[name].text = text\r\n                copyContext[name].unit = unit\r\n                onChange({ name: info.name, text: info.text, unit: info.unit, context: copyContext })\r\n            }} />\r\n    )\r\n}\r\n\r\nexport default function ObjectProperty (props: {\r\n    id: string,\r\n    info: {\r\n        resolution: { solution?: string, special?: string, error?: string},\r\n        name: string,\r\n        text: string,\r\n        unit: string,\r\n        context: Object,\r\n        inheritedContext: Object,\r\n        missingContext: Array<string>,\r\n        requiredContext: Array<string>\r\n    },\r\n    onChange: Function\r\n}) {\r\n    const {\r\n        id,\r\n        info,\r\n        onChange\r\n    } = props\r\n    // const placeholder = info.inheritedContext &&\r\n    // info.inheritedContext[info.name] &&\r\n    // info.inheritedContext[info.name].resolution &&\r\n    // info.inheritedContext[info.name].resolution.solution ?\r\n    // info.inheritedContext[info.name].resolution.solution : undefined\r\n    const nameStyle = { marginTop: 7, marginBottom: 2, color: getColor(info.name) }\r\n\r\n    return (\r\n        <div>\r\n            <div>\r\n                <div style={nameStyle}>\r\n                    {info.name\r\n                        ? <Label>{info.name} =&nbsp;\r\n                            {info.resolution.solution\r\n                                ? formatNumber(info.resolution.solution)\r\n                                : null}\r\n                        </Label>\r\n                        : null}\r\n                </div>\r\n                <StyledContainer>\r\n                    <StyledInput type='text'\r\n                        placeholder='Name / Value / Equation'\r\n                        style={{ marginBottom: 5 }}\r\n                        value={info.text || ''}\r\n                        onChange={event => {\r\n                            let text = event.target.value\r\n                            if (text.trim() === '') {\r\n                                text = undefined\r\n                            }\r\n                            onChange({ name: info.name, text, unit: info.unit, context: getNewContext({ name: info.name, previousText: info.text, text, unit: info.unit, context: info.context }) })\r\n                        }} />\r\n                    <StyledInput type='text'\r\n                        placeholder='Unit'\r\n                        style={{ marginLeft: 2, marginBottom: 5 }}\r\n                        value={info.unit || ''}\r\n                        onChange={event => {\r\n                            let unit = event.target.value\r\n                            if (unit.trim() === '') {\r\n                                unit = undefined\r\n                            }\r\n                            onChange({ name: info.name, text: info.text, unit, context: getNewContext({ name: info.name, previousText: info.previousText, text: info.text, unit, context: info.context }) })\r\n                        }} />\r\n                </StyledContainer>\r\n            </div>\r\n            {info.requiredContext && info.requiredContext.map(variable => <NestedProperty key={`${id}-${variable}`} id={id} variable={variable} info={info} onChange={onChange} />)}\r\n        </div>\r\n    )\r\n}\r\n","import styled from 'styled-components'\r\nimport * as styles from 'styles'\r\n\r\nconst StyledTextarea = styled.textarea`\r\n    font-family: 'Ubuntu', sans-serif;\r\n    font-size: 1rem;\r\n    line-height: 1.2rem;\r\n    padding: 4px 6px;\r\n    border-radius: 4px;\r\n    border: none;\r\n    width: 100%;\r\n    box-shadow: 0px 0px 2px 2px ${styles.inputShadow};\r\n    outline: none;\r\n    :focus {\r\n        background-color: ${styles.inputFocus};\r\n    }\r\n`\r\n\r\nexport default StyledTextarea\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport ObjectProperty from 'components/ObjectProperty'\r\nimport StyledTextarea from 'components/StyledTextarea'\r\nimport StyledInput from 'components/StyledInput'\r\n\r\nconst StyledObjectCreator = styled.div`\r\n    width: 100%;\r\n`\r\n\r\nconst StyledContainer = styled.div`\r\n    display: flex;\r\n`\r\n\r\nconst Category = styled(StyledInput)`\r\n    margin-top: 2px;\r\n    margin-bottom: 10px;\r\n`\r\n\r\nconst Notes = styled(StyledTextarea)`\r\n    min-height: 4rem;\r\n    resize: vertical;\r\n    margin-top: 2px;\r\n    margin-bottom: 10px;\r\n`\r\n\r\nconst Label = styled.div`\r\n    font-weight: bold;\r\n    margin-top: 4px;\r\n`\r\n\r\nexport default function ObjectCreator (props: {\r\n    info: {\r\n        resolution: { solution?: string, special?: string, error?: string},\r\n        name: string,\r\n        text: string,\r\n        unit: string,\r\n        mathml: string,\r\n        context: Object,\r\n        inheritedContext: Object,\r\n        missingContext: Array<string>,\r\n        requiredContext: Array<string>,\r\n        solvableEquation: string\r\n    },\r\n    onContextChange: Function,\r\n    category: string,\r\n    onCategoryChange: Function,\r\n    notes: string,\r\n    onNotesChage: Function\r\n}) {\r\n    return (\r\n        <StyledObjectCreator>\r\n            <Label>Name</Label>\r\n            <ObjectProperty id='base' info={props.info} onChange={props.onContextChange} />\r\n            <Label>Category</Label>\r\n            <StyledContainer>\r\n                <Category value={props.category || ''} type='textarea' onChange={props.onCategoryChange} />\r\n            </StyledContainer>\r\n            <Label>Notes</Label>\r\n            <StyledContainer>\r\n                <Notes value={props.notes || ''} type='textarea' onChange={props.onNotesChange} />\r\n            </StyledContainer>\r\n        </StyledObjectCreator>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport * as styles from 'styles'\r\nimport originalStyledInput from 'components/StyledInput'\r\n\r\nconst StyledInput = styled(originalStyledInput)`\r\n    width: 80px;\r\n`\r\n\r\nconst StyledTableGenerator = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    input {\r\n        text-align: center;\r\n    }\r\n`\r\n\r\nconst StyledOverallSection = styled.div`\r\n    display: flex;\r\n    width: 100%;\r\n    padding-top: 1rem;\r\n`\r\n\r\nconst StyledColumnSection = styled.div`\r\n    padding-left: ${styles.materialIterationWidth + 2}px;\r\n    display: flex;\r\n    padding-bottom: 1rem;\r\n`\r\n\r\nconst StyledSettingGroup = styled.div`\r\n    width: ${styles.materialColumnWidth}px;\r\n    padding: 2px;\r\n    text-align: right;\r\n`\r\n\r\nconst StackedColumn = styled.div`\r\n    flex-direction: column;\r\n`\r\n\r\nconst Setting = styled.div`\r\n    display: flex;\r\n    padding: 2px;\r\n`\r\n\r\nconst Label = styled.div`\r\n    padding-top: .2rem;\r\n    padding-right: 1rem;\r\n`\r\n\r\nexport default function TableGenerator (props) {\r\n    const {\r\n        columns,\r\n        columnColorObject,\r\n        columnSettings,\r\n        settings = {},\r\n        onGeneratorSettingChange,\r\n        onColumnSettingChange\r\n    } = props\r\n    const left = settings.left\r\n    const right = settings.right\r\n\r\n    function renderColumns ({ columns, columnColorObject, columnSettings, onColumnSettingChange }) {\r\n        const changeColumnSetting = (columnName, settingName) => {\r\n            return function (event) {\r\n                const newValue = event.target.value\r\n                if (!columnSettings[columnName] || newValue !== columnSettings[columnName][settingName]) {\r\n                    const newColumnSettings = { ...columnSettings }\r\n                    if (!columnSettings[columnName]) {\r\n                        newColumnSettings[columnName] = {}\r\n                    } else {\r\n                        newColumnSettings[columnName] = { ...columnSettings[columnName] }\r\n                    }\r\n                    newColumnSettings[columnName][settingName] = newValue\r\n                    onColumnSettingChange(newColumnSettings)\r\n                }\r\n            }\r\n        }\r\n        return columns.map(column => {\r\n            const option = columnSettings[column] ? columnSettings[column] : {}\r\n            const start = option.start\r\n            const interval = option.interval\r\n            return <StyledSettingGroup key={column}>\r\n                <div style={{ color: columnColorObject[column], fontWeight: 'bold', paddingTop: 10, paddingBottom: 10 }}>{column}</div>\r\n                <StackedColumn>\r\n                    <Setting>\r\n                        <Label>Start</Label>\r\n                        <StyledInput style={{ marginLeft: 18 }} type='number' onChange={changeColumnSetting(column, 'start')} value={start || ''} placeholder='0' />\r\n                    </Setting>\r\n                    <Setting>\r\n                        <Label>Interval</Label>\r\n                        <StyledInput type='number' onChange={changeColumnSetting(column, 'interval')} value={interval || ''} placeholder='1' />\r\n                    </Setting>\r\n                </StackedColumn>\r\n            </StyledSettingGroup>\r\n        })\r\n    }\r\n\r\n    function changeSetting (settingName) {\r\n        return function (event) {\r\n            const newValue = event.target.value.replace(/-/g, '')\r\n            if (newValue !== settings[settingName]) {\r\n                const newSetting = { ...settings }\r\n                newSetting[settingName] = newValue\r\n                onGeneratorSettingChange(newSetting)\r\n            }\r\n        }\r\n    }\r\n    return (\r\n        <StyledTableGenerator>\r\n            <StyledOverallSection>\r\n                <Setting style={{ paddingRight: 8 }}>\r\n                    <Label>Left</Label>\r\n                    <StyledInput type='number' onChange={changeSetting('left')} value={left || ''} placeholder='0' />\r\n                </Setting>\r\n                <Setting>\r\n                    <Label>Right</Label>\r\n                    <StyledInput type='number' onChange={changeSetting('right')} value={right || ''} placeholder='10' />\r\n                </Setting>\r\n            </StyledOverallSection>\r\n            <StyledColumnSection>\r\n                {renderColumns({ columns, columnColorObject, columnSettings, onColumnSettingChange })}\r\n            </StyledColumnSection>\r\n        </StyledTableGenerator>\r\n    )\r\n}\r\n","import styled from 'styled-components'\r\n\r\nexport default styled.div`\r\n    position: fixed;\r\n    bottom: 15px;\r\n    right: 5px;\r\n    i {\r\n        font-size: 3rem;\r\n    }\r\n    div {\r\n        display: flex;\r\n    }\r\n`\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport * as styles from 'styles'\r\n\r\nconst StyledSearchButton = styled.div`\r\n    color: black;\r\n    cursor: pointer;\r\n    border-radius: 30px;\r\n`\r\n\r\nconst StyledSearchButtonWithHover = styled.div`\r\n    color: black;\r\n    cursor: pointer;\r\n    border-radius: 30px;\r\n    ${styles.buttonHover('Search', -6)}\r\n`\r\n\r\nexport default function SearchButton (props) {\r\n    if (props.hover) {\r\n        return (\r\n            <StyledSearchButtonWithHover {...props} style={{ ...props.style, backgroundColor: props.active ? styles.primaryColor : undefined }}>\r\n                <i className='material-icons' style={props.style}>search</i>\r\n            </StyledSearchButtonWithHover>\r\n        )\r\n    } else {\r\n        return (\r\n            <StyledSearchButton {...props} style={{ ...props.style, backgroundColor: props.active ? styles.primaryColor : undefined }}>\r\n                <i className='material-icons' style={props.style}>search</i>\r\n            </StyledSearchButton>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport * as styles from 'styles'\r\n\r\nconst StyledSaveButton = styled.div`\r\n    color: black;\r\n    cursor: pointer;\r\n    border-radius: 30px;\r\n    ${styles.buttonHover('Save')}\r\n`\r\n\r\nexport default function SaveButton (props) {\r\n    if (props.text && props.location) {\r\n        return (\r\n            <StyledSaveButton {...props}>\r\n                <i className='material-icons'>save</i>\r\n            </StyledSaveButton>\r\n        )\r\n    } else {\r\n        return null\r\n    }\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport * as styles from 'styles'\r\nimport pickaxe from 'icons/pickaxe.svg'\r\n\r\nconst StyledMaterialButton = styled.div`\r\n    color: black;\r\n    cursor: pointer;\r\n    border-radius: 30px;\r\n`\r\n\r\nconst StyledMaterialButtonWithHover = styled.div`\r\n    color: black;\r\n    cursor: pointer;\r\n    border-radius: 30px;\r\n    ${styles.buttonHover('Material', -9)}\r\n`\r\n\r\nexport default function MaterialButton (props) {\r\n    if (props.hover) {\r\n        return (\r\n            <StyledMaterialButtonWithHover {...props} style={{ ...props.style, backgroundColor: props.active ? styles.primaryColor : undefined }}>\r\n                <img src={pickaxe} alt='Material' height={(props.style && props.style.height) || 50} width={(props.style && props.style.width) || 50} />\r\n            </StyledMaterialButtonWithHover>\r\n        )\r\n    } else {\r\n        return (\r\n            <StyledMaterialButton {...props} style={{ ...props.style, backgroundColor: props.active ? styles.primaryColor : undefined }}>\r\n                <img src={pickaxe} alt='Material' height={(props.style && props.style.height) || 50} width={(props.style && props.style.width) || 50} />\r\n            </StyledMaterialButton>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport * as styles from 'styles'\r\nimport anvil from 'icons/anvil.svg'\r\n\r\nconst StyledForgeButton = styled.div`\r\n    color: black;\r\n    cursor: pointer;\r\n    border-radius: 30px;\r\n`\r\n\r\nconst StyledForgeButtonWithHover = styled.div`\r\n    color: black;\r\n    cursor: pointer;\r\n    border-radius: 30px;\r\n    ${styles.buttonHover('Forge', -2)}\r\n`\r\n\r\nexport default function ForgeButton (props) {\r\n    if (props.hover) {\r\n        return (\r\n            <StyledForgeButtonWithHover {...props} style={{ ...props.style, backgroundColor: props.active ? styles.primaryColor : undefined }}>\r\n                <img src={anvil} alt='Forge' height={(props.style && props.style.height) || 50} width={(props.style && props.style.width) || 50} />\r\n            </StyledForgeButtonWithHover>\r\n        )\r\n    } else {\r\n        return (\r\n            <StyledForgeButton {...props} style={{ ...props.style, backgroundColor: props.active ? styles.primaryColor : undefined }}>\r\n                <img src={anvil} alt='Forge' height={(props.style && props.style.height) || 50} width={(props.style && props.style.width) || 50} />\r\n            </StyledForgeButton>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport * as styles from 'styles'\r\nimport crown from 'icons/crown.svg'\r\n\r\nconst StyledCommandButton = styled.div`\r\n    color: black;\r\n    cursor: pointer;\r\n    border-radius: 30px;\r\n`\r\n\r\nconst StyledCommandButtonWithHover = styled.div`\r\n    color: black;\r\n    cursor: pointer;\r\n    border-radius: 30px;\r\n    ${styles.buttonHover('Command', -20)}\r\n`\r\n\r\nexport default function CommandButton (props) {\r\n    if (props.hover) {\r\n        return (\r\n            <StyledCommandButtonWithHover {...props} style={{ ...props.style, backgroundColor: props.active ? styles.primaryColor : undefined }}>\r\n                <img src={crown} alt='Command' height={(props.style && props.style.height) || 50} width={(props.style && props.style.width) || 50} />\r\n            </StyledCommandButtonWithHover>\r\n        )\r\n    } else {\r\n        return (\r\n            <StyledCommandButton {...props} style={{ ...props.style, backgroundColor: props.active ? styles.primaryColor : undefined }}>\r\n                <img src={crown} alt='Command' height={(props.style && props.style.height) || 50} width={(props.style && props.style.width) || 50} />\r\n            </StyledCommandButton>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport * as styles from 'styles'\r\nimport easel from 'icons/easel.svg'\r\n\r\nconst StyledReviewButton = styled.div`\r\n    color: black;\r\n    cursor: pointer;\r\n    border-radius: 30px;\r\n`\r\n\r\nconst StyledReviewButtonWithHover = styled.div`\r\n    color: black;\r\n    cursor: pointer;\r\n    border-radius: 30px;\r\n    ${styles.buttonHover('Review', -6)}\r\n`\r\n\r\nexport default function ReviewButton (props) {\r\n    if (props.hover) {\r\n        return (\r\n            <StyledReviewButtonWithHover {...props} style={{ ...props.style, backgroundColor: props.active ? styles.primaryColor : undefined }}>\r\n                <img src={easel} alt='Review' height={(props.style && props.style.height) || 50} width={(props.style && props.style.width) || 50} />\r\n            </StyledReviewButtonWithHover>\r\n        )\r\n    } else {\r\n        return (\r\n            <StyledReviewButton {...props} style={{ ...props.style, backgroundColor: props.active ? styles.primaryColor : undefined }}>\r\n                <img src={easel} alt='Review' height={(props.style && props.style.height) || 50} width={(props.style && props.style.width) || 50} />\r\n            </StyledReviewButton>\r\n        )\r\n    }\r\n}\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst StyledFrozenTd = styled.div`\r\n`\r\n\r\nconst FrozenColumnTd = props => {\r\n    return (\r\n        <ColumnTd>\r\n            <StyledFrozenTd {...props} />\r\n        </ColumnTd>\r\n    )\r\n}\r\n\r\nconst ColumnTd = styled.td`\r\n`\r\n\r\nlet overrideSelect = false\r\n\r\nexport default function DataGrid (props: {\r\n    callback?: Function,\r\n    header?: Array<Array<string>>,\r\n    body: Array<Array<string>>,\r\n    footer?: Array<Array<string>>,\r\n    numbered?: boolean,\r\n    highlightColor?: string,\r\n    highlightInitialColor?: string,\r\n    hoverHeaderAndNumberedColor?: string,\r\n    className?: string,\r\n    style?: string,\r\n    cellComponent?: React.node,\r\n    frozenColumns?: number,\r\n    frozenColumnWidth?: number,\r\n    styles?: {\r\n        header?: {\r\n            tr?: Object,\r\n            td?: Object\r\n        },\r\n        body?: {\r\n            tr?: Object,\r\n            td?: Object,\r\n            edit?: Object\r\n        },\r\n        footer?: {\r\n            tr?: Object,\r\n            td?: Object\r\n        },\r\n        thead?: Object,\r\n        tbody?: Object,\r\n        tfoot?: Object\r\n    },\r\n    classes?: {\r\n        header?: {\r\n            tr?: string,\r\n            td?: string\r\n        },\r\n        body?: {\r\n            tr?: string,\r\n            td?: string,\r\n            edit?: string\r\n        },\r\n        footer?: {\r\n            tr?: string,\r\n            td?: string\r\n        },\r\n        thead?: string,\r\n        tbody?: string,\r\n        tfoot?: string\r\n    }\r\n}) {\r\n    const {\r\n        body,\r\n        frozenColumns,\r\n        editState = {},\r\n        setEdit,\r\n        keepEditing,\r\n        skipTabIndexes,\r\n        initialSelectionCell,\r\n        setInitialSelectionCell,\r\n        shouldHandleBlur = false\r\n    } = props\r\n    const CellComponent = props.cellComponent\r\n    const EditCellComponent = props.editComponent\r\n\r\n    const [clickedCell, setClickedCell] = useState({})\r\n    const [selectionRange, setSelectionRange] = useState({})\r\n    const [selectionCurrent, setSelectionCurrent] = useState({})\r\n    const [hover, setHover] = useState({})\r\n    const [selection, setSelection] = useState()\r\n    const [mouseDown, setMouseDown] = useState(false)\r\n    const [blurredOnce, setBlurredOnce] = useState(false)\r\n    const [shiftModifier, setShiftModifier] = useState(false)\r\n    const [ctrlModifier, setCtrlModifier] = useState(false)\r\n\r\n    const editorRef = useRef()\r\n    const selectionRef = useRef()\r\n\r\n    useEffect(() => {\r\n        setSelection(body.filter(filterRow).map(tabularizeSelection).join('\\n'))\r\n    }, [body, selectionRange]) // eslint-disable-line\r\n\r\n    useEffect(() => {\r\n        if (selection) {\r\n            selectText()\r\n        }\r\n    }, [selection])\r\n\r\n    useEffect(() => {\r\n        if (editState.row !== undefined && editState.column !== undefined) {\r\n            const ref = editorRef.current\r\n            ref.focus()\r\n            if (overrideSelect) {\r\n                overrideSelect = false\r\n            } else {\r\n                ref.setSelectionRange(0, ref.value.length)\r\n            }\r\n        } else {\r\n            selectText()\r\n        }\r\n    }, [editState.row, editState.column])\r\n\r\n    function selectText () {\r\n        const ref = selectionRef.current\r\n        ref.focus()\r\n        ref.setSelectionRange(0, ref.value.length)\r\n    }\r\n\r\n    function componentKeyDown (event) {\r\n        if (event.key === 'Shift') {\r\n            setShiftModifier(true)\r\n        }\r\n        if (event.key === 'Control') {\r\n            setCtrlModifier(true)\r\n        }\r\n    }\r\n\r\n    function componentKeyUp (event) {\r\n        if (event.key === 'Shift') {\r\n            setShiftModifier(false)\r\n        }\r\n        if (event.key === 'Control') {\r\n            setCtrlModifier(false)\r\n        }\r\n    }\r\n\r\n    function tableMouseUp () {\r\n        setMouseDown(false)\r\n    }\r\n\r\n    function gridMouseMove (event, row, column) {\r\n        setHover({\r\n            row: row === undefined ? -1 : row,\r\n            column: column === undefined ? -1 : column\r\n        })\r\n        if (mouseDown) {\r\n            // If row is null then it should be a header column event; use the body length\r\n            // If column is null then it should be a numbered column event; use the body column count\r\n            setRangeSelection(row === undefined ? body.length : row,\r\n                column === undefined ? body[0].length : column, true)\r\n        }\r\n    }\r\n\r\n    function gridMouseDown (event, row, column) {\r\n        event.preventDefault()\r\n        setMouseDown(true)\r\n        setBlurredOnce(false)\r\n        // reset clicked if it's not the last clicked cell, so that it won't open the editor\r\n        setClickedCell({\r\n            row: clickedCell.row === row ? row : undefined,\r\n            column: clickedCell.column === column ? column : undefined\r\n        })\r\n        if (shiftModifier) {\r\n            // If row is null then it should be a header column event; use the body length\r\n            // If column is null then it should be a numbered column event; use the body column count\r\n            setRangeSelection(row === undefined ? body.length : row,\r\n                column === undefined ? body[0].length : column, true)\r\n        } else {\r\n            setSingleSelection(row, column, true)\r\n        }\r\n    }\r\n\r\n    function gridMouseUp (event, row, column) {\r\n        // clickedCell.row and clickedCell.column store the last clicked cell, if it's the same open the editor\r\n        if (clickedCell.row === row && clickedCell.column === column) editCell(row, column)\r\n        // if the mouse up event fires on the same cell that was moused down on,\r\n        // then save it as the clicked cell in state\r\n        else if (initialSelectionCell.row === row && initialSelectionCell.column === column) {\r\n            setClickedCell({ row, column })\r\n        }\r\n    }\r\n\r\n    function selectionKeyDown (event) {\r\n        if (event.key === 'Enter') {\r\n            editCell(initialSelectionCell.row, initialSelectionCell.column)\r\n        }\r\n        if (event.key === 'Tab') {\r\n            event.preventDefault()\r\n            if (shiftModifier) {\r\n                setSingleSelection(initialSelectionCell.row, initialSelectionCell.column - 1)\r\n            } else {\r\n                setSingleSelection(initialSelectionCell.row, initialSelectionCell.column + 1)\r\n            }\r\n        }\r\n        if (event.key === 'Escape') {\r\n            if (editState.row !== undefined && editState.column !== undefined) {\r\n                closeEditor()\r\n            } else {\r\n                resetSelection()\r\n            }\r\n        }\r\n        if (event.key === 'Delete') {\r\n            const deleteArray = []\r\n            let row = selectionRange.startRow\r\n            let column = selectionRange.startColumn\r\n            const columnArray = []\r\n            while (column <= selectionRange.endColumn) {\r\n                if (column > -1) {\r\n                    columnArray.push('')\r\n                }\r\n                column++\r\n            }\r\n            while (row <= selectionRange.endRow) {\r\n                if (row > -1) {\r\n                    deleteArray.push(columnArray)\r\n                }\r\n                row++\r\n            }\r\n            updateArray(selectionRange.startRow, selectionRange.startColumn, body, deleteArray)\r\n        }\r\n        if (event.key === 'Backspace') {\r\n            props.callback(initialSelectionCell.row, initialSelectionCell.column, '')\r\n        }\r\n        if (event.key === 'ArrowUp') {\r\n            // if shift: expand range; else: move selection and initial\r\n            if (shiftModifier) {\r\n                setRangeSelection(selectionCurrent.row - 1, selectionCurrent.column)\r\n            } else {\r\n                setSingleSelection(initialSelectionCell.row - 1, initialSelectionCell.column)\r\n            }\r\n        }\r\n        if (event.key === 'ArrowDown') {\r\n            if (shiftModifier) {\r\n                setRangeSelection(selectionCurrent.row + 1, selectionCurrent.column)\r\n            } else {\r\n                setSingleSelection(initialSelectionCell.row + 1, initialSelectionCell.column)\r\n            }\r\n        }\r\n        if (event.key === 'ArrowLeft') {\r\n            if (shiftModifier) {\r\n                setRangeSelection(selectionCurrent.row, selectionCurrent.column - 1)\r\n            } else {\r\n                setSingleSelection(initialSelectionCell.row, initialSelectionCell.column - 1)\r\n            }\r\n        }\r\n        if (event.key === 'ArrowRight') {\r\n            if (shiftModifier) {\r\n                setRangeSelection(selectionCurrent.row, selectionCurrent.column + 1)\r\n            } else {\r\n                setSingleSelection(initialSelectionCell.row, initialSelectionCell.column + 1)\r\n            }\r\n        }\r\n        if (ctrlModifier) {\r\n            if (event.key === 'a') setSingleSelection(null, null)\r\n        } else {\r\n            // If ctrlModifier is false\r\n            if (event.key.length === 1) {\r\n                editCell(initialSelectionCell.row, initialSelectionCell.column, event.key)\r\n                overrideSelect = true\r\n            }\r\n        }\r\n    }\r\n\r\n    function resetSelection () {\r\n        setInitialSelectionCell({})\r\n        setSelectionCurrent({})\r\n        setSelectionRange({})\r\n        setClickedCell({})\r\n        setBlurredOnce(false)\r\n        setSelection('')\r\n    }\r\n\r\n    function selectionBlurred () {\r\n        // Blurs once (from the input element) when you click on a cell, and drag\r\n        // Blurs again if you click and drag outside of the table scope and click on something\r\n        // If the mouse down event isn't fired when the input is blurred they didn't\r\n        // click anywhere on the table, so it should reset the selection and lose focus\r\n\r\n        // Lost focus\r\n        if (!mouseDown || blurredOnce) {\r\n            setCtrlModifier(false)\r\n            setShiftModifier(false)\r\n            setMouseDown(false)\r\n            resetSelection()\r\n        } else {\r\n            setBlurredOnce(true)\r\n        }\r\n    }\r\n\r\n    function selectionPaste (event) {\r\n        event.clipboardData.items[0].getAsString(text => {\r\n            const rows = text.split('\\n')\r\n            const data = text.match(/\\t/g)\r\n                ? rows.map((row) => row.split('\\t'))\r\n                : rows.map((row) => row.split(','))\r\n            updateArray(\r\n                selectionRange.startRow,\r\n                selectionRange.startColumn,\r\n                body,\r\n                data\r\n            )\r\n        })\r\n    }\r\n\r\n    function setSingleSelection (rowIndex: number, columnIndex: number, forceSelection?: boolean) {\r\n        const row = rowIndex ? rowIndex === -1 && columnIndex === -1 ? -1 : cleanRow(rowIndex) : 0\r\n        const column = columnIndex ? rowIndex === -1 && columnIndex === -1 ? -1 : cleanColumn(row, columnIndex) : 0\r\n        setInitialSelectionCell({ row, column })\r\n        setSelectionCurrent({ row, column })\r\n        setSelectionRange({\r\n            startRow: row,\r\n            endRow: rowIndex !== undefined ? row : body.length,\r\n            startColumn: column,\r\n            endColumn: columnIndex !== undefined ? column : body[0].length\r\n        })\r\n        if (forceSelection) {\r\n            selectText()\r\n        }\r\n    }\r\n\r\n    function setRangeSelection (rowIndex: number, columnIndex: number, forceSelection?: boolean) {\r\n        const row = cleanRow(rowIndex)\r\n        const column = cleanColumn(row, columnIndex)\r\n        setSelectionCurrent({ row, column })\r\n        setSelectionRange({\r\n            startRow: row < initialSelectionCell.row ? row : initialSelectionCell.row,\r\n            endRow: row < initialSelectionCell.row ? initialSelectionCell.row : row,\r\n            startColumn: column < initialSelectionCell.column ? column : initialSelectionCell.column,\r\n            endColumn: column < initialSelectionCell.column ? initialSelectionCell.column : column\r\n        })\r\n        if (forceSelection) {\r\n            selectText()\r\n        }\r\n    }\r\n\r\n    function editorKeyDown (event) {\r\n        if (event.key === 'Escape') {\r\n            closeEditor(false)\r\n        }\r\n        if (event.key === 'Enter') {\r\n            if (keepEditing) {\r\n                if (shiftModifier) {\r\n                    editCell(editState.row - 1, editState.column)\r\n                } else {\r\n                    editCell(editState.row + 1, editState.column)\r\n                }\r\n            } else {\r\n                closeEditor()\r\n                if (shiftModifier) {\r\n                    setSingleSelection(editState.row - 1, editState.column)\r\n                } else {\r\n                    setSingleSelection(editState.row + 1, editState.column)\r\n                }\r\n            }\r\n        }\r\n        if (event.key === 'Tab' && (!skipTabIndexes || !skipTabIndexes.includes(editState.column))) {\r\n            event.preventDefault()\r\n            if (keepEditing) {\r\n                if (shiftModifier) {\r\n                    editCell(editState.row, editState.column - 1)\r\n                } else {\r\n                    editCell(editState.row, editState.column + 1)\r\n                }\r\n            } else {\r\n                closeEditor()\r\n                if (shiftModifier) {\r\n                    setSingleSelection(editState.row, editState.column - 1)\r\n                } else {\r\n                    setSingleSelection(editState.row, editState.column + 1)\r\n                }\r\n            }\r\n        }\r\n        if (event.key === 's') {\r\n            if (ctrlModifier) {\r\n                event.preventDefault()\r\n                closeEditor()\r\n            }\r\n        }\r\n    }\r\n\r\n    function editCell (rowIndex, columnIndex, startingValue) {\r\n        if (editState.original !== undefined && editState.row !== undefined && editState.column !== undefined &&\r\n            (CellComponent ? editState.original.value : editState.original) !== (CellComponent ? editState.current.value : editState.current)) {\r\n            props.callback(editState.row, editState.column, editState.current)\r\n        }\r\n        if (rowIndex >= 0 && columnIndex >= 0) {\r\n            const row = cleanRow(rowIndex)\r\n            const column = cleanColumn(row, columnIndex)\r\n            const original = startingValue !== undefined ? startingValue : body[row][column]\r\n            setEdit({ row, column, original, current: original })\r\n        }\r\n    }\r\n\r\n    function closeEditor (save = true, valueOverride) {\r\n        if (save) {\r\n            props.callback(editState.row, editState.column, valueOverride || editState.current)\r\n        }\r\n        setEdit({})\r\n        setSingleSelection(editState.row, editState.column)\r\n    }\r\n\r\n    function updateArray (startRow, startColumn, originalArray, newArrayData) {\r\n        return originalArray.map((row, rowIndex) => updateArrayRow(row, startColumn, newArrayData[rowIndex - startRow], rowIndex))\r\n    }\r\n\r\n    function updateArrayRow (row, startColumn, newArrayData, rowIndex) {\r\n        if (newArrayData !== undefined) {\r\n            return Object.assign([], row.map((cell, cellIndex) => updateArrayCell(cell, newArrayData[cellIndex - startColumn], rowIndex, cellIndex)))\r\n        } else {\r\n            return row\r\n        }\r\n    }\r\n\r\n    function updateArrayCell (cell, data, rowIndex, cellIndex) {\r\n        if (data !== undefined) {\r\n            props.callback(rowIndex, cellIndex, data)\r\n            return data\r\n        } else {\r\n            return cell\r\n        }\r\n    }\r\n\r\n    function cleanRow (row) {\r\n        return row > body.length - 1 ? body.length - 1\r\n            : row < 0 ? 0 : row\r\n    }\r\n\r\n    function cleanColumn (row, column) {\r\n        return column > body[row].length - 1 ? body[row].length - 1\r\n            : column < 0 ? 0 : column\r\n    }\r\n\r\n    function filterRow (row, rowIndex) {\r\n        if (rowIndex >= selectionRange.startRow &&\r\n            rowIndex <= selectionRange.endRow) {\r\n            return true\r\n        } else {\r\n            return false\r\n        }\r\n    }\r\n\r\n    function tabularizeSelection (row) {\r\n        return row.filter(filterToSelection).map(i => {\r\n            return CellComponent\r\n                ? (i.value === undefined ? '' : i.value.toString())\r\n                : i.toString()\r\n        }).join('\\t')\r\n    }\r\n\r\n    function filterToSelection (cell, columnIndex) {\r\n        if (columnIndex >= selectionRange.startColumn &&\r\n            columnIndex <= selectionRange.endColumn) {\r\n            return true\r\n        } else {\r\n            return false\r\n        }\r\n    }\r\n\r\n    function headerRow (row, rowIndex) {\r\n        return (\r\n            <tr key={rowIndex} className={props.classes && props.classes.header && props.classes.header.tr}\r\n                style={props.styles && props.styles.header && props.styles.header.tr}>\r\n                {row.map((obj, ind) => headerCell(obj, ind))}\r\n            </tr>\r\n        )\r\n    }\r\n\r\n    function headerCell (cell, colIndex) {\r\n        const columnIndex = props.numbered ? colIndex - 1 : colIndex\r\n        return (\r\n            <td key={columnIndex} className={props.classes && props.classes.header && props.classes.header.td}\r\n                style={Object.assign({}, props.styles && props.styles.header && props.styles.header.td,\r\n                    props.numbered && columnIndex === -1 && props.styles && props.styles.body && props.styles.body.numbered,\r\n                    {\r\n                        backgroundColor: columnIndex <= hover.column &&\r\n                        columnIndex >= hover.column\r\n                            ? props.hoverHeaderAndNumberedColor\r\n                            : null\r\n                    })}\r\n                onMouseDown={(event) => gridMouseDown(event, null, columnIndex)}\r\n                onMouseMove={(event) => gridMouseMove(event, null, columnIndex)}>\r\n                {cell}\r\n            </td>\r\n        )\r\n    }\r\n\r\n    function bodyRow (row, rowIndex) {\r\n        return (\r\n            <tr key={rowIndex} className={props.classes && props.classes.header && props.classes.body.tr}\r\n                style={props.styles && props.styles.body && props.styles.body.tr}>\r\n                {props.numbered &&\r\n                    <FrozenColumnTd className={props.classes && props.classes.header && props.classes.body.td}\r\n                        style={Object.assign({}, props.styles && props.styles.body && props.styles.body.td,\r\n                            props.styles && props.styles.body && props.styles.body.numbered,\r\n                            {\r\n                                backgroundColor: rowIndex <= hover.row &&\r\n                                rowIndex >= hover.row\r\n                                    ? props.hoverHeaderAndNumberedColor : null\r\n                            })}\r\n                        onMouseDown={(event) => gridMouseDown(event, rowIndex, null)}\r\n                        onMouseMove={(event) => gridMouseMove(event, rowIndex, null)}>\r\n                        {rowIndex - props.numberedOffset}\r\n                    </FrozenColumnTd>\r\n                }\r\n                {row.map((obj, ind) => bodyCell(obj, ind, rowIndex))}\r\n            </tr>\r\n        )\r\n    }\r\n\r\n    function bodyCell (cell, columnIndex, rowIndex) {\r\n        const Td = frozenColumns && columnIndex < frozenColumns ? FrozenColumnTd : ColumnTd\r\n        if (editState.row === rowIndex && editState.column === columnIndex) {\r\n            return (\r\n                <ColumnTd key={columnIndex} className={props.classes && props.classes.body && props.classes.body.edit}\r\n                    style={Object.assign({}, props.styles && props.styles.body && props.styles.body.edit,\r\n                        {\r\n                            padding: '0px'\r\n                        })}\r\n                    onMouseMove={(event) => gridMouseMove(event, rowIndex, columnIndex)}>\r\n                    {EditCellComponent\r\n                        ? <EditCellComponent\r\n                            editorRef={editorRef}\r\n                            editorValue={editState.current}\r\n                            onChange={value => setEdit({ ...editState, current: value })}\r\n                            closeEditor={closeEditor}\r\n                            onKeyDown={editorKeyDown}\r\n                            {...cell}></EditCellComponent>\r\n                        : <input style={props.styles && props.styles.body && props.styles.body.edit}\r\n                            ref={editorRef}\r\n                            type='text'\r\n                            value={editState.current}\r\n                            onChange={(event) => setEdit({ ...editState, current: event.target.value })}\r\n                            onKeyDown={editorKeyDown} />}\r\n                </ColumnTd>\r\n            )\r\n        } else {\r\n            return (\r\n                <Td key={columnIndex} className={props.classes && props.classes.body && props.classes.body.td}\r\n                    style={Object.assign({}, props.styles && props.styles.body && props.styles.body.td,\r\n                        {\r\n                            backgroundColor: rowIndex <= selectionRange.endRow &&\r\n                            rowIndex >= selectionRange.startRow &&\r\n                            columnIndex <= selectionRange.endColumn &&\r\n                            columnIndex >= selectionRange.startColumn\r\n                                ? rowIndex === initialSelectionCell.row &&\r\n                            columnIndex === initialSelectionCell.column\r\n                                    ? props.highlightInitialColor\r\n                                    : props.highlightColor : null\r\n                        })}\r\n                    onMouseMove={(event) => gridMouseMove(event, rowIndex, columnIndex)}\r\n                    onMouseDown={(event) => gridMouseDown(event, rowIndex, columnIndex)}\r\n                    onMouseUp={(event) => gridMouseUp(event, rowIndex, columnIndex)}>\r\n                    {CellComponent ? <CellComponent {...cell} /> : cell}\r\n                </Td>\r\n            )\r\n        }\r\n    }\r\n\r\n    function footerRow (row, rowIndex) {\r\n        return (\r\n            <tr key={rowIndex} className={props.classes && props.classes.footer && props.classes.footer.tr}\r\n                style={props.styles && props.styles.footer && props.styles.footer.tr}>\r\n                {row.map((obj, ind) => footerCell(obj, ind, rowIndex))}\r\n            </tr>\r\n        )\r\n    }\r\n\r\n    function footerCell (cell, columnIndex, rowIndex) {\r\n        return (\r\n            <td key={columnIndex} data={columnIndex} className={props.classes && props.classes.footer && props.classes.footer.td}\r\n                style={Object.assign({}, props.styles && props.styles.footer && props.styles.footer.td,\r\n                    {\r\n                        backgroundColor: columnIndex <= selectionRange.endColumn &&\r\n                        columnIndex >= selectionRange.startColumn &&\r\n                        rowIndex <= selectionRange.endRow &&\r\n                        rowIndex >= selectionRange.startRow\r\n                            ? props.highlightColor\r\n                            : null\r\n                    })}>\r\n                {cell}\r\n            </td>\r\n        )\r\n    }\r\n\r\n    return (\r\n        // overflowX: 'auto' for freezing columns\r\n        <div style={{ width: '100%' }}\r\n            onKeyDown={componentKeyDown}\r\n            onKeyUp={componentKeyUp}>\r\n            <textarea ref={selectionRef}\r\n                type='text'\r\n                value={selection}\r\n                style={{ position: 'fixed', zIndex: -1000, opacity: 0 }}\r\n                readOnly\r\n                onKeyDown={selectionKeyDown}\r\n                onBlur={shouldHandleBlur ? selectionBlurred : undefined}\r\n                onPaste={selectionPaste} />\r\n            <table className={props.className}\r\n                style={Object.assign({}, { cursor: 'cell' }, props.style)}\r\n                onMouseUp={tableMouseUp}\r\n                onMouseLeave={() => {\r\n                    setHover({})\r\n                }}>\r\n                {props.header &&\r\n                    <thead className={props.classes && props.classes.thead}\r\n                        style={props.styles && props.styles.thead}>\r\n                        {props.header.map(headerRow)}\r\n                    </thead>\r\n                }\r\n                {body &&\r\n                    <tbody className={props.classes && props.classes.tbody}\r\n                        style={props.styles && props.styles.tbody}>\r\n                        {body.map(bodyRow)}\r\n                    </tbody>\r\n                }\r\n                {props.footer &&\r\n                    <tfoot className={props.classes && props.classes.tfoot}\r\n                        style={props.styles && props.styles.tfoot}>\r\n                        {props.footer.map(footerRow)}\r\n                    </tfoot>\r\n                }\r\n            </table>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Line } from 'react-chartjs-2'\r\n\r\nconst StyledLine = styled.div`\r\n    padding-left: 1rem;\r\n`\r\n\r\nexport default function Graph (props) {\r\n    const {\r\n        columns,\r\n        columnColorObject,\r\n        rows,\r\n        generatorSettings\r\n    } = props\r\n    const left = parseInt(generatorSettings.left || 0, 10)\r\n    const right = parseInt(generatorSettings.right || 10, 10)\r\n    const labels = []\r\n    let iteration = -1 * left\r\n    const xAxisLabel = columns.length === 2\r\n    while (iteration <= right) {\r\n        if (xAxisLabel) {\r\n            labels.push(rows[iteration + left][0])\r\n        } else {\r\n            labels.push(iteration)\r\n        }\r\n        iteration++\r\n    }\r\n    const datasets = columns.map((column, index) => {\r\n        return {\r\n            label: column,\r\n            lineTension: 0,\r\n            fill: false,\r\n            backgroundColor: columnColorObject[column],\r\n            borderColor: columnColorObject[column],\r\n            pointBorderColor: columnColorObject[column],\r\n            pointBackgroundColor: columnColorObject[column],\r\n            data: rows.map(i => i[index]),\r\n            hidden: index !== columns.length - 1\r\n        }\r\n    })\r\n    const graphData = {\r\n        labels,\r\n        datasets\r\n    }\r\n    return (\r\n        <StyledLine>\r\n            <Line redraw={true} data={graphData} />\r\n        </StyledLine>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst TopBar = styled.div`\r\n    width: 100%;\r\n    cursor: pointer;\r\n`\r\n\r\nexport default function Accordion (props: {\r\n    label: string,\r\n    expanded: boolean,\r\n    toggle: Function\r\n}) {\r\n    const { className, label, expanded, toggle } = props\r\n    return (\r\n        <div className={className}>\r\n            <TopBar onClick={() => toggle()}>\r\n                {label}\r\n            </TopBar>\r\n            {expanded && props.children}\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport * as styles from 'styles'\r\nimport premade from 'utils/premade.json'\r\nimport StyledInput from 'components/StyledInput'\r\nimport Accordion from 'components/Accordion'\r\n\r\nconst StyledFunctionSearch = styled.div`\r\n    padding: 4px 0px;\r\n    background: ${styles.extraLightGray};\r\n    height: 100%;\r\n    overflow-y: auto;\r\n    overflow-x: hidden;\r\n    box-shadow: 0px 4px 6px 4px #aaa;\r\n    border-radius: 6px;\r\n`\r\n\r\nconst Title = styled.div`\r\n    padding-left: 4px;\r\n    width: 500px;\r\n    margin: 4px;\r\n    font-size: 1.4rem;\r\n    font-weight: bold;\r\n`\r\n\r\nconst TitleSection = styled.div`\r\n    padding-top: 4px;\r\n    display: flex;\r\n    cursor: pointer;\r\n`\r\n\r\nconst Close = styled.div`\r\n    width: 100%;\r\n    padding: 4px;\r\n    text-align: right;\r\n    i {\r\n        font-size: 2rem;\r\n        border-radius: 20px;\r\n        :hover {\r\n            background: white;\r\n        }\r\n    }\r\n`\r\n\r\nconst StyledItem = styled.div`\r\n    display: flex;\r\n    padding: 4px;\r\n    a {\r\n        color: black;\r\n        text-decoration: none;\r\n    }\r\n    i {\r\n        font-weight: bold;\r\n        color: ${styles.extraLightGray};\r\n    }\r\n    :hover {\r\n        i {\r\n            color: red;\r\n        }\r\n    }\r\n`\r\n\r\nconst DeleteButton = styled.div`\r\n    i {\r\n        cursor: pointer;\r\n        font-size: 1rem;\r\n        border-radius: 5px;\r\n        padding-top: 2px;\r\n        :hover {\r\n            position: relative;\r\n            ::after {\r\n                font-family: 'Ubuntu', sans-serif;\r\n                font-weight: bold;\r\n                content: \"DELETE\";\r\n                position: absolute;\r\n                top: -2px;\r\n                right: -8px;\r\n                background-color: ${styles.yellow};\r\n                border-radius: 15px;\r\n                padding: 5px 25px 5px 10px;\r\n            }\r\n        }\r\n    }\r\n`\r\n\r\nconst Label = styled.div`\r\n    width: 100%;\r\n    a {\r\n        padding: 6px;\r\n        border-radius: 10px;\r\n        cursor: pointer;\r\n        :hover {\r\n            background: ${styles.lightYellow};\r\n        }\r\n    }\r\n`\r\n\r\nconst SubSection = styled.div`\r\n    font-weight: bold;\r\n    padding: 8px;\r\n    font-size: 1.2rem;\r\n`\r\n\r\nconst NoLocal = styled.div`\r\n    padding: 6px;\r\n`\r\n\r\nconst SearchInput = styled(StyledInput)`\r\n    margin: 4px;\r\n    width: 264px;\r\n    margin-bottom: 14px;\r\n`\r\n\r\nconst CategoryLabel = styled.div`\r\n    padding: 6px;\r\n    font-weight: bold;\r\n    padding-left: 8px;\r\n    background-color: ${styles.lightGray};\r\n`\r\n\r\nfunction escapeRegExp (string) {\r\n    return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&') // $& means the whole matched string\r\n}\r\n\r\nfunction score ({ regexArray, name, url, category, notes }) {\r\n    let score = 0\r\n    regexArray.forEach(regex => {\r\n        score += (name.match(regex) || { length: 0 }).length * 100\r\n        score += (category.match(regex) || { length: 0 }).length * 50\r\n        score += (url.match(regex) || { length: 0 }).length * 10\r\n        score += (notes.match(regex) || { length: 0 }).length * 1\r\n    })\r\n    return score\r\n}\r\n\r\nfunction sortByScore (a, b) {\r\n    if (a.sort > b.sort) {\r\n        return -1\r\n    } else if (a.sort < b.sort) {\r\n        return 1\r\n    } else {\r\n        if (a.name < b.name) {\r\n            return -1\r\n        } else {\r\n            return 1\r\n        }\r\n    }\r\n}\r\n\r\n// Takes in the functions object and returns an array of functions in order of relevance\r\nfunction filterWithSort ({ listObject, filter }) {\r\n    const keys = Object.keys(listObject)\r\n    const regexArray = []\r\n    // Try to use the filter as a regular if it's valid, otherwise use it as a string literal\r\n    // And ignore case\r\n    filter.split(' ').forEach(filterPart => {\r\n        let regex\r\n        try {\r\n            regex = new RegExp(filterPart, 'gi')\r\n        } catch (err) {\r\n            regex = new RegExp(escapeRegExp(filterPart), 'gi')\r\n        }\r\n        regexArray.push(regex)\r\n    })\r\n\r\n    const equationCategories = {}\r\n    keys.forEach(key => {\r\n        const equation = listObject[key]\r\n        const sort = score({ name: key, url: equation.url, category: equation.category || '', notes: equation.notes || '', regexArray })\r\n        if (sort > 0) {\r\n            if (!equationCategories[equation.category || 'None']) {\r\n                equationCategories[equation.category || 'None'] = []\r\n            }\r\n            equationCategories[equation.category || 'None'].push({\r\n                name: key,\r\n                url: equation.url,\r\n                category: equation.category,\r\n                notes: equation.notes,\r\n                sort\r\n            })\r\n        }\r\n    }, [])\r\n    const res = []\r\n    Object.keys(equationCategories).forEach(key => {\r\n        res.push({ name: key, equations: equationCategories[key].sort(sortByScore) })\r\n    })\r\n    return res\r\n}\r\n\r\nfunction SelfStateAccordion (props) {\r\n    const { label } = props\r\n    const [isOpen, setIsOpen] = useState(true)\r\n\r\n    return <Accordion label={label} expanded={isOpen} toggle={() => setIsOpen(!isOpen)}>\r\n        {props.children}\r\n    </Accordion>\r\n}\r\n\r\nexport default function FunctionSearch (props) {\r\n    const { toggleSearch, deleteLocalFunction, localFunctions } = props\r\n    const [filter, setFilter] = useState('')\r\n\r\n    const searchElement = useRef()\r\n\r\n    useEffect(() => {\r\n        searchElement.current.focus()\r\n    }, [])\r\n\r\n    const filteredLocal = filterWithSort({ filter, listObject: localFunctions })\r\n    const filteredPremade = filterWithSort({ filter, listObject: premade })\r\n\r\n    function renderLocalEquation (equation) {\r\n        return (\r\n            <StyledItem key={equation.name}>\r\n                <Label>\r\n                    <Link to={equation.url}>{equation.name}</Link>\r\n                </Label>\r\n                <DeleteButton onClick={() => {\r\n                    deleteLocalFunction(equation.name)\r\n                }}>\r\n                    <i className='material-icons'>close</i>\r\n                </DeleteButton>\r\n            </StyledItem>\r\n        )\r\n    }\r\n\r\n    function renderLocalCategory ({ name, equations }) {\r\n        return (\r\n            <SelfStateAccordion key={name} label={<CategoryLabel>Category: {name}</CategoryLabel>}>\r\n                {equations.map(renderLocalEquation)}\r\n            </SelfStateAccordion>\r\n        )\r\n    }\r\n\r\n    function renderPremadeEquation (equation) {\r\n        return (\r\n            <StyledItem key={equation.name}>\r\n                <Label>\r\n                    <Link to={equation.url}>{equation.name}</Link>\r\n                </Label>\r\n            </StyledItem>\r\n        )\r\n    }\r\n\r\n    function renderPremadeCategory ({ name, equations }) {\r\n        return (\r\n            <SelfStateAccordion key={name} label={<CategoryLabel>Category: {name}</CategoryLabel>}>\r\n                {equations.map(renderPremadeEquation)}\r\n            </SelfStateAccordion>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <StyledFunctionSearch>\r\n            <TitleSection onClick={toggleSearch}>\r\n                <Title>\r\n                    Search Vault\r\n                </Title>\r\n                <Close onClick={toggleSearch}>\r\n                    <i className='material-icons'>close</i>\r\n                </Close>\r\n            </TitleSection>\r\n            <SearchInput\r\n                ref={searchElement}\r\n                placeholder='Filter'\r\n                value={filter}\r\n                onChange={event => setFilter(event.target.value)}\r\n            />\r\n            {filteredLocal.length === 0\r\n                ? <NoLocal>Your personal vault is empty</NoLocal>\r\n                : null\r\n            }\r\n            {filteredLocal.map(renderLocalCategory)}\r\n            {filteredPremade.length > 0\r\n                ? <SubSection>Standard Arsenal</SubSection>\r\n                : null\r\n            }\r\n            {filteredPremade.map(renderPremadeCategory)}\r\n        </StyledFunctionSearch>\r\n    )\r\n}\r\n","import React, { Component } from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport { passToHistory } from 'utils/qs'\r\nimport getColor from 'utils/math/getColor'\r\nimport { formatNumber, recursiveSolve, solveWithAddedContext } from 'utils/math'\r\nimport premade from 'utils/premade.json'\r\nimport { getLocalStorage, setLocalStorage } from 'utils/localStorage'\r\nimport { withQsContext } from 'containers/qsContext'\r\nimport MathML from 'components/MathML'\r\nimport ObjectCreator from 'components/ObjectCreator'\r\nimport TableGenerator from 'components/TableGenerator'\r\nimport RightFloater from 'components/RightFloater'\r\nimport SearchButton from 'components/buttons/Search'\r\nimport SaveButton from 'components/buttons/Save'\r\nimport MaterialButton from 'components/buttons/Material'\r\nimport ForgeButton from 'components/buttons/Forge'\r\nimport CommandButton from 'components/buttons/Command'\r\nimport ReviewButton from 'components/buttons/Review'\r\nimport DataGrid from 'components/DataGrid'\r\nimport Graph from 'components/Graph'\r\nimport FunctionSearch from 'components/FunctionSearch'\r\nimport Accordion from 'components/Accordion'\r\nimport * as styles from 'styles'\r\n\r\nconst StyledRoot = styled.div`\r\n    display: flex;\r\n    min-height: 1px;\r\n`\r\n\r\nconst StyledMain = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    @media (max-width: 800px) {\r\n      width: 100% !important;\r\n    }\r\n    display: flex;\r\n    overflow: auto;\r\n`\r\n\r\nconst StyledSearch = styled.div`\r\n    position: fixed;\r\n    width: 0px;\r\n    right: 0px;\r\n    top: 64px;\r\n    bottom: 0px;\r\n    transition: width 150ms ease-in-out;\r\n`\r\n\r\nconst AccordionContents = styled.div`\r\n    padding: 5px 60px;\r\n    @media (max-width: 800px) {\r\n      padding-left: 5px;\r\n      padding-right: 5px;\r\n    }\r\n`\r\n\r\nconst StyledMaterialSection = styled.div`\r\n`\r\n\r\nconst StyledObjectCreator = styled.div`\r\n`\r\n\r\nconst StyledMath = styled.div`\r\n`\r\n\r\nconst StyledGraph = styled.div`\r\n`\r\n\r\nconst StyledTableScrollableLimit = styled.div`\r\n    width: 100%;\r\n    overflow: auto;\r\n`\r\n\r\nconst StyledTableScrollable = styled.div`\r\n`\r\n\r\nconst StyledDataGrid = styled.div`\r\n    input {\r\n      background-color: ${styles.yellow};\r\n      ${styles.inputStyle}\r\n    }\r\n`\r\n\r\nconst Section = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n`\r\n\r\nconst Title = styled.div`\r\n    font-size: 1.5rem;\r\n    padding-left: 1rem;\r\n    color: ${styles.primaryColor};\r\n    font-weight: bold;\r\n`\r\n// text-shadow: -1px 1px 2px #000;\r\n\r\nconst StyledSolution = styled.div`\r\n    font-weight: bold;\r\n    text-align: center;\r\n    padding: 20px;\r\n`\r\n\r\nconst MenuButton = styled.div`\r\n    padding: 5px;\r\n`\r\n\r\nconst StyledText = styled.div`\r\n    padding: 5px;\r\n`\r\n\r\nclass Root extends Component {\r\n    // interface State {\r\n    //   table: Array<Array<any>>,\r\n    //   showSearch: boolean\r\n    // }\r\n    state = {\r\n        table: [\r\n            []\r\n        ],\r\n        initialSelectionCell: {}\r\n    }\r\n\r\n    componentWillMount () {\r\n        const localStorageFunctions = this.getLocalStorageFunctions()\r\n        const accordionState = {\r\n            showSearch: true,\r\n            showMaterial: true,\r\n            showForge: true,\r\n            showReview: true,\r\n            showCommand: true,\r\n            ...this.getLocalStorageAccordionState()\r\n        }\r\n        let category = ''\r\n        if (this.props.text) {\r\n            if (localStorageFunctions[this.props.text]) {\r\n                category = localStorageFunctions[this.props.text].category\r\n            } else if (premade[this.props.text]) {\r\n                category = premade[this.props.text].category\r\n            }\r\n        }\r\n        let notes = ''\r\n        if (this.props.text) {\r\n            if (localStorageFunctions[this.props.text]) {\r\n                notes = localStorageFunctions[this.props.text].notes\r\n            } else if (premade[this.props.text]) {\r\n                notes = premade[this.props.text].notes\r\n            }\r\n        }\r\n        this.setState({\r\n            table: this.generateTable(this.props),\r\n            localStorageFunctions,\r\n            accordionState,\r\n            notes,\r\n            category\r\n        })\r\n    }\r\n\r\n    componentWillReceiveProps (nextProps) {\r\n        const localStorageFunctions = this.getLocalStorageFunctions()\r\n        const { info = {}, generatorSettings = {}, columnSettings = {} } = nextProps\r\n        const missingVariables = info.fullMissingContext || []\r\n        const currentProps = this.props\r\n        const currentMissingVariables = currentProps.info.missingVariables || []\r\n        if (currentProps.info.solvableEquation !== info.solvableEquation ||\r\n            currentProps.generatorSettings.left !== generatorSettings.left ||\r\n            currentProps.generatorSettings.right !== generatorSettings.right ||\r\n            Object.keys(currentProps.columnSettings).some(key => {\r\n                return typeof currentProps.columnSettings[key] !== typeof columnSettings[key] ||\r\n                    currentProps.columnSettings[key].start !== columnSettings[key].start ||\r\n                    currentProps.columnSettings[key].interval !== columnSettings[key].interval\r\n            }) ||\r\n            currentMissingVariables.some(previous => !missingVariables.includes(previous)) ||\r\n            missingVariables.some(next => !currentMissingVariables.includes(next))) {\r\n            const newState = {\r\n                table: this.generateTable(nextProps),\r\n                localStorageFunctions\r\n            }\r\n            if (this.props.text !== nextProps.text) {\r\n                if (!nextProps.text) {\r\n                    newState.category = ''\r\n                } else if (localStorageFunctions[nextProps.text]) {\r\n                    newState.category = localStorageFunctions[nextProps.text].category || ''\r\n                } else if (premade[nextProps.text]) {\r\n                    newState.category = premade[nextProps.text].category || ''\r\n                }\r\n            }\r\n            if (this.props.text !== nextProps.text) {\r\n                if (!nextProps.text) {\r\n                    newState.notes = ''\r\n                } else if (localStorageFunctions[nextProps.text]) {\r\n                    newState.notes = localStorageFunctions[nextProps.text].notes || ''\r\n                } else if (premade[nextProps.text]) {\r\n                    newState.notes = premade[nextProps.text].notes || ''\r\n                }\r\n            }\r\n            this.setState(newState)\r\n        }\r\n    }\r\n\r\n    generateTable ({ info, columnSettings, generatorSettings }) {\r\n        const missingVariables = info.fullMissingContext || []\r\n        const { left = 0, right = 10 } = generatorSettings\r\n        const table = []\r\n        const generatorColumns = missingVariables.map(column => {\r\n            let start = 0\r\n            let interval = 1\r\n            if (columnSettings[column] && columnSettings[column].start) {\r\n                start = columnSettings[column].start\r\n            }\r\n            if (columnSettings[column] && columnSettings[column].interval) {\r\n                interval = columnSettings[column].interval\r\n            }\r\n            return {\r\n                name: column,\r\n                start,\r\n                interval\r\n            }\r\n        })\r\n        const runner = {\r\n            iteration: -1 * parseInt(left, 10)\r\n        }\r\n        function calculateIteration (column) {\r\n            return parseFloat(column.start) + runner.iteration * parseFloat(column.interval)\r\n        }\r\n        while (runner.iteration <= parseInt(right, 10)) {\r\n            const simpleContext = {}\r\n            const cells = generatorColumns.map(column => {\r\n                const res = calculateIteration(column)\r\n                simpleContext[column.name] = res\r\n                return Number(res.toFixed(10))\r\n            })\r\n            const solution = Number(parseFloat(solveWithAddedContext({ text: info.solvableEquation, simpleContext }).solution || 0).toFixed(10))\r\n            table.push([...cells, solution])\r\n            runner.iteration++\r\n        }\r\n        return table\r\n    }\r\n\r\n    passCleanedSettingsToHistory (oldHistoryObject, newHistoryObject) {\r\n        const cleanedHistoryObject = {\r\n            history: oldHistoryObject.history,\r\n            text: oldHistoryObject.text,\r\n            category: oldHistoryObject.category,\r\n            notes: oldHistoryObject.notes,\r\n            context: { ...oldHistoryObject.context },\r\n            columnSettings: { ...oldHistoryObject.columnSettings },\r\n            generatorSettings: { ...oldHistoryObject.generatorSettings },\r\n            pushToHistory: (!oldHistoryObject.text && newHistoryObject.text) || (oldHistoryObject.text && !newHistoryObject.text)\r\n        }\r\n\r\n        if (newHistoryObject.columnSettings) {\r\n            cleanedHistoryObject.columnSettings = { ...newHistoryObject.columnSettings }\r\n            cleanedHistoryObject.pushToHistory = false\r\n        }\r\n\r\n        if (newHistoryObject.generatorSettings) {\r\n            cleanedHistoryObject.generatorSettings = { ...newHistoryObject.generatorSettings }\r\n            cleanedHistoryObject.pushToHistory = false\r\n        }\r\n\r\n        if (typeof newHistoryObject.category === 'string') {\r\n            cleanedHistoryObject.category = newHistoryObject.category\r\n            cleanedHistoryObject.pushToHistory = false\r\n        }\r\n\r\n        if (typeof newHistoryObject.notes === 'string') {\r\n            cleanedHistoryObject.notes = newHistoryObject.notes\r\n            cleanedHistoryObject.pushToHistory = false\r\n        }\r\n\r\n        if (newHistoryObject.text || newHistoryObject.context || newHistoryObject.unit) {\r\n            const info = recursiveSolve({ text: newHistoryObject.text, context: newHistoryObject.context, unit: newHistoryObject.unit })\r\n            Object.keys(cleanedHistoryObject.columnSettings).forEach(key => {\r\n                if (!info.fullMissingContext.includes(key)) {\r\n                    delete cleanedHistoryObject.columnSettings[key]\r\n                }\r\n            })\r\n            cleanedHistoryObject.text = newHistoryObject.text\r\n            cleanedHistoryObject.unit = newHistoryObject.unit\r\n            cleanedHistoryObject.context = { ...newHistoryObject.context }\r\n        }\r\n        passToHistory({ ...cleanedHistoryObject })\r\n    }\r\n\r\n    colorVariables ({ variables, columnColorObject }) {\r\n        return variables.map(variable => {\r\n            return <div key={variable} style={{ fontWeight: 'bold', color: columnColorObject[variable] }}>{variable}</div>\r\n        })\r\n    }\r\n\r\n    toggleHelp = () => {\r\n        this.setState({ showHelp: !this.state.showHelp })\r\n    }\r\n\r\n    toggleSearch = () => {\r\n        this.setLocalStorageAccordionState({ ...this.state.accordionState, showSearch: !this.state.accordionState.showSearch })\r\n    }\r\n\r\n    toggleMaterial = () => {\r\n        this.setLocalStorageAccordionState({ ...this.state.accordionState, showMaterial: !this.state.accordionState.showMaterial })\r\n    }\r\n\r\n    toggleForge = () => {\r\n        this.setLocalStorageAccordionState({ ...this.state.accordionState, showForge: !this.state.accordionState.showForge })\r\n    }\r\n\r\n    toggleReview = () => {\r\n        this.setLocalStorageAccordionState({ ...this.state.accordionState, showReview: !this.state.accordionState.showReview })\r\n    }\r\n\r\n    toggleWield = () => {\r\n        this.setLocalStorageAccordionState({ ...this.state.accordionState, showWield: !this.state.accordionState.showWield })\r\n    }\r\n\r\n    toggleCommand = () => {\r\n        this.setLocalStorageAccordionState({ ...this.state.accordionState, showCommand: !this.state.accordionState.showCommand })\r\n    }\r\n\r\n    getLocalStorageFunctions = () => {\r\n        return getLocalStorage('localFunctions') || {}\r\n    }\r\n\r\n    setLocalStorageFunctions = (localStorageFunctions) => {\r\n        setLocalStorage('localFunctions', localStorageFunctions)\r\n        this.setState({ localStorageFunctions })\r\n    }\r\n\r\n    getLocalStorageAccordionState = () => {\r\n        return getLocalStorage('accordion')\r\n    }\r\n\r\n    setLocalStorageAccordionState = (accordionState) => {\r\n        setLocalStorage('accordion', accordionState)\r\n        this.setState({ accordionState })\r\n    }\r\n\r\n    saveLocalFunction = ({ history, name, category, notes }) => {\r\n        const localStorageFunctions = this.getLocalStorageFunctions()\r\n        localStorageFunctions[name] = {\r\n            category,\r\n            notes,\r\n            date: Date.now(),\r\n            url: history.location.path || '' + history.location.search || ''\r\n        }\r\n        this.setLocalStorageFunctions(localStorageFunctions)\r\n    }\r\n\r\n    deleteLocalFunction = (name) => {\r\n        const localStorageFunctions = this.getLocalStorageFunctions()\r\n        delete localStorageFunctions[name]\r\n        this.setLocalStorageFunctions(localStorageFunctions)\r\n    }\r\n\r\n    setInitialSelectionCell = (selection) => {\r\n        this.setState({ ...this.state, initialSelectionCell: selection })\r\n    }\r\n\r\n    render () {\r\n        const { info, text, context, columnSettings, generatorSettings, history } = this.props\r\n        const historyObject = { history, text, context, generatorSettings, columnSettings }\r\n\r\n        const {\r\n            table,\r\n            category,\r\n            notes,\r\n            localStorageFunctions,\r\n            accordionState: {\r\n                showSearch,\r\n                showMaterial,\r\n                showForge,\r\n                showReview,\r\n                // showWield,\r\n                showCommand\r\n            }\r\n        } = this.state\r\n        const solution = info.resolution.solution\r\n        const mathml = info.mathml\r\n        const missingVariables = info.fullMissingContext.filter(i => i !== text)\r\n        const columnColorObject = missingVariables.reduce((acc, current) => {\r\n            const res = { ...acc }\r\n            res[current] = getColor(current)\r\n            return res\r\n        }, {})\r\n        columnColorObject[text] = getColor(text)\r\n        return (\r\n            <StyledRoot>\r\n                <StyledMain style={{ width: showSearch ? 'calc(100% - 300px)' : '100%' }}>\r\n                    <Accordion\r\n                        expanded={showForge}\r\n                        toggle={this.toggleForge}\r\n                        label={\r\n                            <Section>\r\n                                <ForgeButton />\r\n                                <Title>Build Equation</Title>\r\n                            </Section>\r\n                        }>\r\n                        <AccordionContents>\r\n                            <StyledObjectCreator>\r\n                                <ObjectCreator\r\n                                    info={{ ...info, name: '' }}\r\n                                    onContextChange={({ text, unit, context }) => this.passCleanedSettingsToHistory(historyObject,\r\n                                        {\r\n                                            text,\r\n                                            unit,\r\n                                            context\r\n                                        })}\r\n                                    category={category}\r\n                                    onCategoryChange={event => {\r\n                                        this.setState({ category: event.target.value })\r\n                                    }}\r\n                                    notes={notes}\r\n                                    onNotesChange={event => {\r\n                                        this.setState({ notes: event.target.value })\r\n                                    }}\r\n                                />\r\n                                {solution &&\r\n                                    <StyledSolution style={{ color: columnColorObject[text] }}>\r\n                                        {text} = {formatNumber(solution)}\r\n                                    </StyledSolution>\r\n                                }\r\n                            </StyledObjectCreator>\r\n                        </AccordionContents>\r\n                    </Accordion>\r\n                    <Accordion\r\n                        expanded={showReview}\r\n                        toggle={this.toggleReview}\r\n                        label={\r\n                            <Section>\r\n                                <ReviewButton />\r\n                                <Title>Review</Title>\r\n                            </Section>\r\n                        }>\r\n                        <AccordionContents>\r\n                            <StyledMath>\r\n                                {mathml\r\n                                    ? <MathML title={text} mathml={mathml} />\r\n                                    : <StyledText>\r\n                                        Define your equation. Go to <ForgeButton style={{ height: 40, width: 40, display: 'inline' }} onClick={this.toggleForge} />Build Equation\r\n                                        <br />\r\n                                        <br />\r\n                                    </StyledText>\r\n                                }\r\n                            </StyledMath>\r\n                        </AccordionContents>\r\n                    </Accordion>\r\n                    <Accordion\r\n                        expanded={showMaterial}\r\n                        toggle={this.toggleMaterial}\r\n                        label={\r\n                            <Section>\r\n                                <MaterialButton />\r\n                                <Title>Define Variables</Title>\r\n                            </Section>\r\n                        }>\r\n                        <AccordionContents>\r\n                            <StyledMaterialSection>\r\n                                <StyledTableScrollableLimit>\r\n                                    <StyledTableScrollable\r\n                                        style={{\r\n                                            width: missingVariables.length ? ((missingVariables.length + 1) * (styles.materialColumnWidth + 4) + styles.materialIterationWidth + 6) : '100%'\r\n                                        }}>\r\n                                        {missingVariables.length > 0 &&\r\n                                            <TableGenerator\r\n                                                info={info}\r\n                                                columns={missingVariables}\r\n                                                columnColorObject={columnColorObject}\r\n                                                columnSettings={columnSettings}\r\n                                                settings={generatorSettings}\r\n                                                onGeneratorSettingChange={settings => this.passCleanedSettingsToHistory(historyObject,\r\n                                                    {\r\n                                                        generatorSettings: settings\r\n                                                    })}\r\n                                                onColumnSettingChange={settings => this.passCleanedSettingsToHistory(historyObject,\r\n                                                    {\r\n                                                        columnSettings: settings\r\n                                                    })}\r\n                                                tableGenerated={table => this.setState({ table })} />\r\n                                        }\r\n                                        {missingVariables.length > 0\r\n                                            ? <StyledDataGrid>\r\n                                                <DataGrid header={[['Iteration', ...this.colorVariables({ variables: [...missingVariables, text], columnColorObject })]]}\r\n                                                    numbered\r\n                                                    numberedOffset={generatorSettings.left || 0}\r\n                                                    body={table}\r\n                                                    styles={{\r\n                                                        header: {\r\n                                                            td: { textAlign: 'right' }\r\n                                                        },\r\n                                                        body: {\r\n                                                            edit: {\r\n                                                                width: styles.materialColumnWidth - 10\r\n                                                            },\r\n                                                            td: {\r\n                                                                width: styles.materialColumnWidth,\r\n                                                                textAlign: 'right',\r\n                                                                borderRadius: 2,\r\n                                                                boxShadow: '0px 0px 3px 2px #CCC'\r\n                                                            },\r\n                                                            numbered: { width: styles.materialIterationWidth, textAlign: 'left' }\r\n                                                        }\r\n                                                    }}\r\n                                                    highlightColor='#bfa'\r\n                                                    highlightInitialColor='#7f7'\r\n                                                    hoverHeaderAndNumberedColor='#fc04'\r\n                                                    initialSelectionCell={this.state.initialSelectionCell}\r\n                                                    setInitialSelectionCell={this.setInitialSelectionCell}\r\n                                                    callback={(row, column, data) => {\r\n                                                        table[row][column] = data\r\n                                                        this.setState({ table })\r\n                                                    }} />\r\n                                            </StyledDataGrid>\r\n                                            : <div>\r\n                                                Start by naming your problem. Go to <ForgeButton style={{ height: 40, width: 40, display: 'inline' }} onClick={this.toggleForge} />Build Equation\r\n                                                <br />\r\n                                                <br />\r\n                                                As you break things down, anything named that is left without a value can be defined here.\r\n                                                <br />\r\n                                                <br />\r\n                                            </div>\r\n                                        }\r\n                                    </StyledTableScrollable>\r\n                                </StyledTableScrollableLimit>\r\n                            </StyledMaterialSection>\r\n                        </AccordionContents>\r\n                    </Accordion>\r\n                    <Accordion\r\n                        expanded={showCommand}\r\n                        toggle={this.toggleCommand}\r\n                        label={\r\n                            <Section>\r\n                                <CommandButton />\r\n                                <Title>Graph</Title>\r\n                            </Section>\r\n                        }>\r\n                        <AccordionContents>\r\n                            <StyledGraph>\r\n                                {missingVariables.length > 0\r\n                                    ? <Graph\r\n                                        columns={[...missingVariables, text]}\r\n                                        columnColorObject={columnColorObject}\r\n                                        rows={table}\r\n                                        generatorSettings={generatorSettings} />\r\n                                    : <StyledText>\r\n                                        The graph uses numbers from <MaterialButton style={{ height: 40, width: 40, display: 'inline' }} onClick={this.toggleMaterial} /> Define Variables\r\n                                    </StyledText>\r\n                                }\r\n                            </StyledGraph>\r\n                        </AccordionContents>\r\n                    </Accordion>\r\n                </StyledMain>\r\n                <StyledSearch style={{ width: showSearch ? 300 : 0 }}>\r\n                    {showSearch && <FunctionSearch\r\n                        localFunctions={localStorageFunctions}\r\n                        deleteLocalFunction={this.deleteLocalFunction}\r\n                        toggleSearch={this.toggleSearch}\r\n                    />}\r\n                </StyledSearch>\r\n                <RightFloater style={{ display: 'flex' }}>\r\n                    <MenuButton>\r\n                        <SaveButton\r\n                            hover\r\n                            text={text}\r\n                            location={history.location}\r\n                            onClick={() => {\r\n                                this.saveLocalFunction({ history, name: text, category, notes })\r\n                            }} />\r\n                    </MenuButton>\r\n                    <MenuButton><SearchButton hover active={showSearch} onClick={this.toggleSearch} /></MenuButton>\r\n                </RightFloater>\r\n            </StyledRoot>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withQsContext(withRouter(Root))\r\n","import React from 'react'\r\nimport { recursiveSolve } from 'utils/math'\r\nimport { getFromHistory } from 'utils/qs'\r\n\r\nexport const withQsContext = Component => props => {\r\n    const qsContext = getFromHistory(props.history)\r\n    const info = recursiveSolve({ text: qsContext.text, context: qsContext.context, unit: qsContext.unit })\r\n    return <Component {...props} {...qsContext} info={info} />\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { formatNumber } from 'utils/math'\r\n\r\nconst StyledCell = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    min-width: 200px;\r\n    width: 200px;\r\n    margin: 2px;\r\n`\r\n\r\nconst Label = styled.div`\r\n    margin-left: 2px;\r\n    min-height: 1.2rem;\r\n`\r\n\r\nconst Value = styled.div`\r\n    margin-left: 2px;\r\n    text-align: right;\r\n`\r\n\r\nconst InheritedValue = styled.div`\r\n    color: gray;\r\n    margin-left: 2px;\r\n    text-align: right;\r\n`\r\n\r\nconst Solution = styled.div`\r\n    margin-right: 2px;\r\n    text-align: right;\r\n`\r\n\r\nexport default function Cell (props) {\r\n    const { value, info } = props\r\n    if (info) { // if there's info then it must be the root\r\n        const { solution } = props\r\n        return (\r\n            <StyledCell>\r\n                <Label>\r\n                    {value}\r\n                </Label>\r\n                <Solution>\r\n                    {formatNumber(solution)}\r\n                </Solution>\r\n            </StyledCell>\r\n        )\r\n    } else {\r\n        const { label, isInherited } = props\r\n        return (\r\n            <StyledCell>\r\n                <Label>\r\n                    {label}\r\n                </Label>\r\n                {isInherited\r\n                    ? <InheritedValue>\r\n                        {formatNumber(value)}\r\n                    </InheritedValue>\r\n                    : <Value>\r\n                        {value === '' ? 'undefined' : formatNumber(value)}\r\n                    </Value>\r\n                }\r\n            </StyledCell>\r\n        )\r\n    }\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst StyledAutocomplete = styled.div`\r\n    position: relative;\r\n    width: 100%;\r\n`\r\n\r\nconst StyledInput = styled.input`\r\n    position: relative;\r\n    width: 100%;\r\n`\r\n\r\nconst Suggestions = styled.div`\r\n    position: absolute;\r\n    width: 100%;\r\n`\r\n\r\nconst SuggestionsWithHover = styled(Suggestions)`\r\n    div:hover {\r\n        background: lightblue;\r\n    }\r\n`\r\n\r\nconst StyledSuggestion = styled.div`\r\n    cursor: pointer;\r\n    background: lightgray;\r\n    padding: 4px;\r\n`\r\n\r\nfunction Suggestion (props) {\r\n    return (\r\n        <StyledSuggestion {...props} style={{ backgroundColor: props.active && 'lightblue' }}>\r\n            {props.id}\r\n        </StyledSuggestion>\r\n    )\r\n}\r\n\r\nfunction getSuggestions (options, textToMatch) {\r\n    const regex = new RegExp(textToMatch, 'i')\r\n    return options.filter(option => regex.test(option.id))\r\n}\r\n\r\nfunction handleKeyDown (event, state, setState, suggestions, onSelect) {\r\n    if (event.key === 'ArrowDown') {\r\n        if (state.activeIndex === undefined || state.activeIndex + 1 >= suggestions.length) {\r\n            setState({ isMouseControlled: false, activeIndex: 0 })\r\n        } else {\r\n            setState({ isMouseControlled: false, activeIndex: state.activeIndex + 1 })\r\n        }\r\n    }\r\n    if (event.key === 'ArrowUp') {\r\n        if (state.activeIndex === undefined) {\r\n            setState({ isMouseControlled: false, activeIndex: 0 })\r\n        } else if (state.activeIndex === 0) {\r\n            setState({ isMouseControlled: false, activeIndex: suggestions.length - 1 })\r\n        } else {\r\n            setState({ isMouseControlled: false, activeIndex: state.activeIndex - 1 })\r\n        }\r\n    }\r\n    if (event.key === 'Enter') {\r\n        if (!state.isMouseControlled && state.activeIndex !== undefined) {\r\n            event.stopPropagation()\r\n            onSelect(suggestions[state.activeIndex].id)\r\n        } else if (suggestions.length === 1) {\r\n            event.stopPropagation()\r\n            onSelect(suggestions[0].id)\r\n        }\r\n    }\r\n    if (event.key === 'Escape') {\r\n        if (!state.isMouseControlled || state.activeIndex !== undefined) {\r\n            setState({ isMouseControlled: true })\r\n        }\r\n    }\r\n}\r\n\r\nexport default function Autocomplete (props) {\r\n    const { className, editorRef, value, onChange, onSelect, options } = props\r\n\r\n    const [ suggestions, setSuggestions ] = useState([])\r\n\r\n    useEffect(() => {\r\n        setSuggestions(getSuggestions(options, value))\r\n    }, [ value, options ])\r\n\r\n    const [ state, setState ] = useState({ isMouseControlled: true })\r\n\r\n    return (\r\n        <StyledAutocomplete className={className} onMouseMove={() => {\r\n            if (state.isMouseControlled === false) {\r\n                setState({ isMouseControlled: true, activeIndex: state.activeIndex })\r\n            }\r\n        }}>\r\n            <StyledInput\r\n                value={value}\r\n                onChange={event => onChange(event.target.value)}\r\n                onKeyDown={event => handleKeyDown(event, state, setState, suggestions, onSelect)}\r\n                ref={editorRef}\r\n            />\r\n            {state.isMouseControlled\r\n                ? <SuggestionsWithHover>\r\n                    {suggestions.map(option => <Suggestion key={option.id} onClick={() => onSelect(option.id)} {...option}></Suggestion>)}\r\n                </SuggestionsWithHover>\r\n                : <Suggestions>\r\n                    {suggestions.map((option, index) => <Suggestion key={option.id} active={index === state.activeIndex} onClick={() => onSelect(option.id)} {...option}></Suggestion>)}\r\n                </Suggestions>\r\n            }\r\n        </StyledAutocomplete>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport * as styles from 'styles'\r\nimport ObjectCreator from 'components/ObjectCreator'\r\nimport Autocomplete from 'components/Autocomplete'\r\nimport { recursiveSolve, stripContext } from 'utils/math'\r\nimport { getEquationFromUrl } from 'utils/qs'\r\nimport premade from 'utils/premade.json'\r\n\r\nconst StyledEditCell = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n`\r\n\r\nconst Label = styled.div`\r\n`\r\n\r\nconst StyledAutocomplete = styled(Autocomplete)`\r\n    min-height: 1.2rem;\r\n    input {\r\n        font-size: 1rem;\r\n        width: 202px;\r\n        padding-left: 4px;\r\n        background-color: ${styles.inputFocus};\r\n        outline: none;\r\n        height: 40px;\r\n    }\r\n`\r\n\r\nconst StyledInput = styled.input`\r\n    min-width: 202px;\r\n    width: 202px;\r\n    min-height: 1.2rem;\r\n    background-color: ${styles.inputFocus};\r\n    text-align: right;\r\n`\r\n\r\nconst Equation = styled.div`\r\n    position: absolute;\r\n    background-color: #f6f6ff;\r\n    width: 520px;\r\n    border-radius: 10px;\r\n    padding: 8px;\r\n    margin-left: 210px;\r\n    \r\n    @media (max-width:768px) {\r\n        left: 0px;\r\n        top: 45px;\r\n        width: calc(100vw - 28px);\r\n    }\r\n`\r\n\r\nconst EditActionBar = styled.div`\r\n    display: flex;\r\n    justify-content: space-between;\r\n`\r\n\r\nconst Section = styled.div`\r\n    display: flex;\r\n`\r\n\r\nconst Clickable = styled.div`\r\n    margin: 5px;\r\n    cursor: pointer;\r\n    color: ${styles.primaryColor};\r\n`\r\n\r\nfunction EditEquation (props) {\r\n    const {\r\n        editorValue,\r\n        editorRef,\r\n        onChange,\r\n        onKeyDown,\r\n        autocompleteOptions,\r\n        localFunctions,\r\n        saveNewFunction,\r\n        closeEditor\r\n    } = props\r\n\r\n    return (\r\n        <StyledEditCell onKeyDown={onKeyDown}>\r\n            <Equation>\r\n                <EditActionBar>\r\n                    <Section>\r\n                        <Clickable onClick={() => closeEditor()}>Save</Clickable>\r\n                        <Clickable onClick={() => closeEditor(false)}>Cancel</Clickable>\r\n                    </Section>\r\n                    <Section>\r\n                        <Clickable onClick={() => {\r\n                            saveNewFunction({\r\n                                name: editorValue.value,\r\n                                category: editorValue.category,\r\n                                context: editorValue.info.context,\r\n                                notes: editorValue.notes,\r\n                                text: editorValue.info.text,\r\n                                unit: editorValue.info.unit\r\n                            }, localFunctions)\r\n                            closeEditor()\r\n                        }}>Make Reusable</Clickable>\r\n                        <Clickable onClick={() => onChange({ ...editorValue, info: recursiveSolve({ text: '' }) })}>Clear</Clickable>\r\n                    </Section>\r\n                </EditActionBar>\r\n                <ObjectCreator\r\n                    info={{ ...editorValue.info, name: editorValue.value || '' }}\r\n                    onContextChange={info => onChange({ ...editorValue, info: recursiveSolve({ text: info.text, unit: info.unit, context: stripContext(info.context) }) })}\r\n                    onCategoryChange={event => onChange({ ...editorValue, category: event.target.value })}\r\n                    onNotesChange={event => onChange({ ...editorValue, notes: event.target.value })}\r\n                />\r\n            </Equation>\r\n            <StyledAutocomplete\r\n                editorRef={editorRef}\r\n                value={editorValue.value}\r\n                onChange={value => onChange({ ...editorValue, value })}\r\n                onSelect={functionName => {\r\n                    let newInfo\r\n                    if (localFunctions[functionName] && localFunctions[functionName].url) {\r\n                        newInfo = getEquationFromUrl(localFunctions[functionName].url).context[functionName]\r\n                    } else if (localFunctions[functionName]) {\r\n                        newInfo = { context: localFunctions[functionName].context, text: localFunctions[functionName].text, unit: localFunctions[functionName].unit }\r\n                    } else if (premade[functionName]) {\r\n                        newInfo = getEquationFromUrl(premade[functionName].url).context[functionName]\r\n                    }\r\n                    closeEditor(true, { info: newInfo, value: functionName })\r\n                }}\r\n                options={editorValue && editorValue.info && editorValue.info.text !== '' ? [] : autocompleteOptions}\r\n            />\r\n        </StyledEditCell>\r\n    )\r\n}\r\n\r\nexport default function EditCell (props) {\r\n    const { label } = props\r\n    if (label) {\r\n        const { editorValue, editorRef, onChange, onKeyDown } = props\r\n\r\n        const textValue = typeof editorValue === 'object' ? editorValue.value : editorValue\r\n\r\n        return (\r\n            <StyledEditCell onKeyDown={onKeyDown}>\r\n                <Label>{label}</Label>\r\n                <StyledInput\r\n                    ref={editorRef}\r\n                    onChange={event => {\r\n                        onChange(event.target.value)\r\n                    }}\r\n                    value={textValue === undefined ? '' : textValue} />\r\n            </StyledEditCell>\r\n        )\r\n    } else {\r\n        return <EditEquation {...props} />\r\n    }\r\n}\r\n","import React, { useEffect, useReducer, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport * as styles from 'styles'\r\nimport DataGrid from 'components/DataGrid'\r\nimport Cell from 'components/Cell'\r\nimport EditCell from 'components/EditCell'\r\nimport { recursiveSolve, stripContext } from 'utils/math'\r\nimport { getLocalStorage, setLocalStorage, useLocalStorage } from 'utils/localStorage'\r\nimport premade from 'utils/premade.json'\r\n\r\nconst StyledSheet = styled.div`\r\n    min-height: 1px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 100%;\r\n`\r\n\r\nconst Top = styled.div`\r\n    display: flex;\r\n    width: 100%;\r\n    min-height: 42px;\r\n    background-color: ${styles.lightGray};\r\n    ${'' /* box-shadow: 0px 4px 8px #888;\r\n    border-radius: 3px; */}\r\n`\r\n\r\nconst Bottom = styled.div`\r\n    display: flex;\r\n    overflow: auto;\r\n    flex-grow: 1;\r\n`\r\n\r\nconst Left = styled.div`\r\n    width: 200px;\r\n    min-width: 200px;\r\n`\r\n\r\nconst Label = styled.div`\r\n    margin-top: 4px;\r\n    margin-left: 8px;\r\n    font-size: 1.1rem;\r\n`\r\n\r\nconst Result = styled.div`\r\n    position: absolute;\r\n    font-size: 1.1rem;\r\n    top: 78px;\r\n    left: 150px;\r\n`\r\n\r\nconst RowSection = styled.div`\r\n    display: flex;\r\n    margin-left: auto;\r\n`\r\n\r\nconst RowButton = styled.div`\r\n    margin: 5px;\r\n    cursor: pointer;\r\n    color: ${styles.primaryColor};\r\n`\r\n\r\nexport default function Sheet (props) {\r\n    const [localFunctions, setLocalFunctions] = useLocalStorage({}, 'localFunctions')\r\n    const [dataGridEdit, setDataGridEdit] = useState({})\r\n    const [equationArray, dispatchEquation] = useReducer(equationReducer, { gridBody: [] })\r\n    const [initialSelectionCell, setInitialSelectionCell] = useState({})\r\n\r\n    useEffect(() => {\r\n        dispatchEquation({\r\n            type: 'equationInitialization',\r\n            equations: getLocalStorage('localEquations') || []\r\n        })\r\n    }, [])\r\n\r\n    function equationReducer (state, action) {\r\n        const res = {}\r\n        if (action.type === 'equationInitialization') {\r\n            res.equations = action.equations\r\n        } else if (action.type === 'equationUpdateCell') {\r\n            const { row, column, data } = action\r\n            const newEquations = [...state.equations]\r\n            if (column === 0) {\r\n                if (data) {\r\n                    newEquations[row] = data\r\n                } else {\r\n                    newEquations[row] = { value: '' }\r\n                }\r\n            } else {\r\n                if (!newEquations[row].localContext) {\r\n                    newEquations[row].localContext = {}\r\n                }\r\n                if (data === undefined || data === '') {\r\n                    delete newEquations[row].localContext[state.variableMap[row][column]]\r\n                } else {\r\n                    newEquations[row].localContext[state.variableMap[row][column]] = data\r\n                }\r\n            }\r\n            res.equations = newEquations\r\n        } else if (action.type === 'equationSet') {\r\n            const { info, row } = action\r\n            const newEquations = [...state.equations]\r\n            newEquations[row].text = info.text\r\n            newEquations[row].unit = info.unit\r\n            newEquations[row].context = info.context\r\n            newEquations[row].category = info.category\r\n            newEquations[row].notes = info.notes\r\n            res.equations = newEquations\r\n        } else if (action.type === 'addRow') {\r\n            const newEquations = [...state.equations]\r\n            const index = action.index === undefined ? newEquations.length : action.index\r\n            res.equations = newEquations.slice(0, index).concat([{ value: '' }], newEquations.slice(index))\r\n        } else if (action.type === 'deleteRow') {\r\n            const newEquations = [...state.equations]\r\n            const index = action.index === undefined ? newEquations.length - 1 : action.index\r\n            newEquations.splice(index, 1)\r\n            res.equations = newEquations\r\n        }\r\n        res.equations = setEquations(res.equations)\r\n        Object.assign(res, { ...getGridBodyMap(res.equations) })\r\n        return res\r\n    }\r\n\r\n    function saveNewFunction (newFunction, existingFunctions) {\r\n        const { name, category, context, notes, text, unit } = newFunction\r\n        const newFunctions = Object.assign({}, existingFunctions)\r\n        newFunctions[name] = {\r\n            category,\r\n            context: stripContext(context),\r\n            notes,\r\n            text,\r\n            unit,\r\n            date: Date.now()\r\n        }\r\n        setLocalFunctions(newFunctions)\r\n    }\r\n\r\n    function setEquations (equations) {\r\n        const newEquations = [...equations]\r\n        // fill with blank rows\r\n        if (!newEquations.length) {\r\n            for (var iterator = 0; iterator <= 20; iterator++) {\r\n                newEquations.push({ value: '' })\r\n            }\r\n        }\r\n        setLocalStorage('localEquations', newEquations)\r\n        return newEquations\r\n    }\r\n\r\n    function getGridBodyMap (equations) {\r\n        const variableMap = []\r\n        const sheetContext = {}\r\n        const gridBody = equations.map((equationObject, eqIndex) => {\r\n            const name = equationObject.value\r\n            variableMap.push([name])\r\n            const { text, unit, context = {} } = equationObject.info || {}\r\n            const localContext = equationObject.localContext\r\n            const inheritedContext = Object.assign({}, sheetContext, localContext)\r\n            const info = recursiveSolve({ text, unit, context: stripContext(context), inheritedContext })\r\n            if (!info.resolution.error) {\r\n                sheetContext[name] = info.resolution.solution\r\n            }\r\n            const uniqueMissingContext = info.fullMissingContext && info.fullMissingContext.reduce((prev, curr) => {\r\n                if (prev.includes(curr)) {\r\n                    return prev\r\n                } else {\r\n                    return prev.concat(curr)\r\n                }\r\n            }, [])\r\n            const res = [{\r\n                // Props passed into (edit) cell component\r\n                info,\r\n                autocompleteOptions: Object.keys(Object.assign({}, localFunctions, premade)).map(i => ({ id: i })),\r\n                localFunctions,\r\n                saveNewFunction,\r\n                solution: info.resolution.error ? `Missing: ${uniqueMissingContext.reduce((prev, curr) => {\r\n                    if (inheritedContext[curr]) {\r\n                        return prev\r\n                    } else {\r\n                        return prev.concat(curr)\r\n                    }\r\n                }, []).join(', ')}` : info.resolution.solution,\r\n                value: name\r\n            }]\r\n            if (uniqueMissingContext) {\r\n                uniqueMissingContext.forEach(key => {\r\n                    variableMap[eqIndex].push(key)\r\n                    res.push({\r\n                        label: key,\r\n                        value: '' + (inheritedContext[key] || (context[key] && context[key].text)),\r\n                        isInherited: !localContext || !localContext[key]\r\n                    })\r\n                })\r\n            }\r\n            return res\r\n        })\r\n        return {\r\n            gridBody,\r\n            variableMap\r\n        }\r\n    }\r\n\r\n    return (\r\n        <StyledSheet>\r\n            <Top>\r\n                <Left>\r\n                    <Label>Name</Label>\r\n                    <Result>Value</Result>\r\n                </Left>\r\n                <RowSection>\r\n                    <RowButton onClick={() => dispatchEquation({ type: 'addRow', index: initialSelectionCell.row })}>Add Row</RowButton>\r\n                    <RowButton onClick={() => dispatchEquation({ type: 'deleteRow', index: initialSelectionCell.row })}>Delete Row</RowButton>\r\n                </RowSection>\r\n            </Top>\r\n            <Bottom>\r\n                <DataGrid\r\n                    editState={dataGridEdit}\r\n                    setEdit={editState => {\r\n                        if (editState.column === 0 && typeof editState.current === 'string') {\r\n                            const info = recursiveSolve({ text: '' })\r\n                            const newCurrent = {\r\n                                info,\r\n                                value: editState.current\r\n                            }\r\n                            editState.original = newCurrent\r\n                            editState.current = newCurrent\r\n                        }\r\n                        setDataGridEdit(editState)\r\n                    }}\r\n                    body={equationArray.gridBody}\r\n                    styles={{\r\n                        body: {\r\n                            edit: {\r\n                                borderRadius: 2,\r\n                                boxShadow: '0px 0px 3px 2px #CCC'\r\n                            },\r\n                            td: {\r\n                                borderRadius: 2,\r\n                                boxShadow: '0px 0px 3px 2px #CCC'\r\n                            }\r\n                        }\r\n                    }}\r\n                    initialSelectionCell={initialSelectionCell}\r\n                    setInitialSelectionCell={setInitialSelectionCell}\r\n                    highlightInitialColor={styles.lightOrange}\r\n                    highlightColor={styles.extraLightOrange}\r\n                    callback={(row, column, data) => {\r\n                        dispatchEquation({ type: 'equationUpdateCell', row, column, data })\r\n                    }}\r\n                    cellComponent={Cell}\r\n                    editComponent={EditCell}\r\n                    skipTabIndexes={[0]}\r\n                />\r\n            </Bottom>\r\n        </StyledSheet>\r\n    )\r\n}\r\n","import React from 'react'\r\n\r\nexport default function MaterialIcon (props) {\r\n    return (\r\n        <i {...props} className={`material-icons${props.className ? ` ${props.className}` : ''}`}>{props.children}</i>\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport * as styles from 'styles'\r\nimport DataGrid from 'components/DataGrid'\r\nimport Cell from 'components/Cell'\r\nimport EditCell from 'components/EditCell'\r\nimport MaterialIcon from 'components/buttons/MaterialIcon'\r\nimport { recursiveSolve } from 'utils/math'\r\n\r\nconst StyledSheet = styled.div`\r\n    min-height: 1px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 100%;\r\n`\r\n\r\nconst Top = styled.div`\r\n    display: flex;\r\n    width: 100%;\r\n    background-color: ${styles.extraLightGray};\r\n    position: relative;\r\n    ${'' /* box-shadow: 0px 4px 8px #888;\r\n    border-radius: 3px; */}\r\n`\r\n\r\nconst Bottom = styled.div`\r\n    display: flex;\r\n    overflow: auto;\r\n    flex-grow: 1;\r\n`\r\n\r\nconst RowSection = styled.div`\r\n    display: flex;\r\n    width: 200px;\r\n`\r\n\r\nconst RightSection = styled.div`\r\n    margin-left: auto;\r\n`\r\n\r\nconst StyledButton = styled(MaterialIcon)`\r\n    cursor: pointer;\r\n    margin-top: 4px;\r\n    margin-left: 4px;\r\n`\r\n\r\nconst StyledZoom = styled(MaterialIcon)`\r\n    color: ${styles.primaryColor};\r\n    cursor: pointer;\r\n`\r\n\r\nexport default function Sheet ({ className, style, children, localFunctions, setLocalFunctions, equationArray, dispatchEquation }) {\r\n    const [dataGridEdit, setDataGridEdit] = useState({})\r\n    const [initialSelectionCell, setInitialSelectionCell] = useState({})\r\n\r\n    return (\r\n        <StyledSheet className={className} style={style}>\r\n            <Top>\r\n                <RowSection>\r\n                    <StyledButton style={{ fontSize: 30, color: styles.secondaryColor }} onClick={() => dispatchEquation({ type: 'addRow', index: initialSelectionCell.row })}>add_circle</StyledButton>\r\n                    <StyledButton style={{ fontSize: 30, color: styles.complementaryColor }} onClick={() => dispatchEquation({ type: 'deleteRow', index: initialSelectionCell.row })}>remove_circle</StyledButton>\r\n                    <RightSection>\r\n                        {children}\r\n                        {!equationArray.showVariables\r\n                            ? <StyledZoom style={{ fontSize: 35 }} onClick={() => dispatchEquation({ type: 'toggleHiddenVariables', showVariables: !equationArray.showVariables })}>zoom_in</StyledZoom>\r\n                            : <StyledZoom style={{ fontSize: 35 }} onClick={() => dispatchEquation({ type: 'toggleHiddenVariables', showVariables: !equationArray.showVariables })}>zoom_out</StyledZoom>\r\n                        }\r\n                    </RightSection>\r\n                </RowSection>\r\n            </Top>\r\n            <Bottom>\r\n                <DataGrid\r\n                    editState={dataGridEdit}\r\n                    setEdit={editState => {\r\n                        if (editState.column === 0 && typeof editState.current === 'string') {\r\n                            const info = recursiveSolve({ text: '' })\r\n                            const newCurrent = {\r\n                                info,\r\n                                value: editState.current\r\n                            }\r\n                            editState.original = newCurrent\r\n                            editState.current = newCurrent\r\n                        }\r\n                        setDataGridEdit(editState)\r\n                    }}\r\n                    body={equationArray.gridBody}\r\n                    styles={{\r\n                        body: {\r\n                            edit: {\r\n                                borderRadius: 2,\r\n                                boxShadow: '0px 0px 3px 2px #CCC'\r\n                            },\r\n                            td: {\r\n                                borderRadius: 2,\r\n                                boxShadow: '0px 0px 3px 2px #CCC'\r\n                            }\r\n                        }\r\n                    }}\r\n                    initialSelectionCell={initialSelectionCell}\r\n                    setInitialSelectionCell={setInitialSelectionCell}\r\n                    highlightInitialColor={styles.lightOrange}\r\n                    highlightColor={styles.extraLightOrange}\r\n                    callback={(row, column, data) => {\r\n                        dispatchEquation({ type: 'equationUpdateCell', row, column, data })\r\n                    }}\r\n                    cellComponent={Cell}\r\n                    editComponent={EditCell}\r\n                    skipTabIndexes={[0]}\r\n                />\r\n            </Bottom>\r\n        </StyledSheet>\r\n    )\r\n}\r\n","import React, { useReducer, useEffect } from 'react'\r\nimport styled from 'styled-components'\r\nimport * as styles from 'styles'\r\nimport Sheet from 'components/Sheet'\r\nimport MaterialIcon from 'components/buttons/MaterialIcon'\r\nimport { recursiveSolve, stripContext } from 'utils/math'\r\nimport { setLocalStorage } from 'utils/localStorage'\r\nimport premade from 'utils/premade.json'\r\n\r\nconst StyledDiscreteProcess = styled.div`\r\n    min-height: 1px;\r\n    overflow: auto;\r\n    width: fit-content;\r\n    text-align: center;\r\n    display: flex;\r\n    border-bottom: 2px solid ${styles.extraLightGray};\r\n    border-right: 2px solid ${styles.extraLightGray};\r\n`\r\n\r\nconst Section = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n`\r\n\r\nconst StyledSheet = styled(Sheet)`\r\n    overflow: hidden;\r\n`\r\n\r\nconst StyledButton = styled(MaterialIcon)`\r\n    cursor: pointer;\r\n`\r\n\r\nconst DiscreteProcess = ({ initialInput, initialOutput, isDiscrete, setIsDiscrete, updateSheet, localFunctions, setLocalFunctions }) => {\r\n    const [inputSheet, dispatchInputEquation] = useReducer(equationReducer, { gridBody: [] })\r\n    const [outputSheet, dispatchOutputEquation] = useReducer(equationReducer, { gridBody: [] })\r\n\r\n    useEffect(() => {\r\n        dispatchInputEquation({\r\n            type: 'equationInitialization',\r\n            equations: initialInput.equations || [],\r\n            side: 'input'\r\n        })\r\n        dispatchOutputEquation({\r\n            type: 'equationInitialization',\r\n            equations: initialOutput.equations || [],\r\n            side: 'output'\r\n        })\r\n    }, [])\r\n\r\n    function equationReducer (state, action) {\r\n        const res = { side: state.side, showVariables: state.showVariables }\r\n        if (action.type === 'equationInitialization') {\r\n            res.equations = action.equations\r\n            res.side = action.side\r\n        } else if (action.type === 'equationUpdateCell') {\r\n            const { row, column, data } = action\r\n            const newEquations = [...state.equations]\r\n            if (column === 0) {\r\n                if (data) {\r\n                    newEquations[row] = data\r\n                } else {\r\n                    newEquations[row] = { value: '' }\r\n                }\r\n            } else {\r\n                if (!newEquations[row].localContext) {\r\n                    newEquations[row].localContext = {}\r\n                }\r\n                if (data === undefined || data === '') {\r\n                    delete newEquations[row].localContext[state.variableMap[row][column]]\r\n                } else {\r\n                    newEquations[row].localContext[state.variableMap[row][column]] = data\r\n                }\r\n            }\r\n            res.equations = newEquations\r\n        } else if (action.type === 'equationSet') {\r\n            const { info, row } = action\r\n            const newEquations = [...state.equations]\r\n            newEquations[row].text = info.text\r\n            newEquations[row].unit = info.unit\r\n            newEquations[row].context = info.context\r\n            newEquations[row].category = info.category\r\n            newEquations[row].notes = info.notes\r\n            res.equations = newEquations\r\n        } else if (action.type === 'addRow') {\r\n            const newEquations = [...state.equations]\r\n            const index = action.index === undefined ? newEquations.length : action.index\r\n            res.equations = newEquations.slice(0, index).concat([{ value: '' }], newEquations.slice(index))\r\n        } else if (action.type === 'deleteRow') {\r\n            const newEquations = [...state.equations]\r\n            const index = action.index === undefined ? newEquations.length - 1 : action.index\r\n            newEquations.splice(index, 1)\r\n            res.equations = newEquations\r\n        } else if (action.type === 'toggleHiddenVariables') {\r\n            res.showVariables = action.showVariables\r\n            res.equations = state.equations\r\n        }\r\n        res.equations = setEquations(res.equations)\r\n        Object.assign(res, { ...getGridBodyMap(res.equations, res.showVariables) })\r\n        updateSheet(res)\r\n        return res\r\n    }\r\n\r\n    function saveNewFunction (newFunction, existingFunctions) {\r\n        const { name, category, context, notes, text, unit } = newFunction\r\n        const newFunctions = Object.assign({}, existingFunctions)\r\n        newFunctions[name] = {\r\n            category,\r\n            context: stripContext(context),\r\n            notes,\r\n            text,\r\n            unit,\r\n            date: Date.now()\r\n        }\r\n        setLocalFunctions(newFunctions)\r\n    }\r\n\r\n    function setEquations (equations) {\r\n        const newEquations = [...equations]\r\n        // fill with blank rows\r\n        if (!newEquations.length) {\r\n            for (var iterator = 0; iterator < 3; iterator++) {\r\n                newEquations.push({ value: '' })\r\n            }\r\n        }\r\n        setLocalStorage('localEquations', newEquations)\r\n        return newEquations\r\n    }\r\n\r\n    function getGridBodyMap (equations, showVariables) {\r\n        const variableMap = []\r\n        const sheetContext = {}\r\n        const gridBody = equations.map((equationObject, eqIndex) => {\r\n            const name = equationObject.value\r\n            variableMap.push([name])\r\n            const { text, unit, context = {} } = equationObject.info || {}\r\n            const localContext = equationObject.localContext\r\n            const inheritedContext = Object.assign({}, sheetContext, localContext)\r\n            const info = recursiveSolve({ text, unit, context: stripContext(context), inheritedContext })\r\n            if (!info.resolution.error) {\r\n                sheetContext[name] = info.resolution.solution\r\n            }\r\n            const uniqueMissingContext = info.fullMissingContext && info.fullMissingContext.reduce((prev, curr) => {\r\n                if (prev.includes(curr)) {\r\n                    return prev\r\n                } else {\r\n                    return prev.concat(curr)\r\n                }\r\n            }, [])\r\n            const res = [{\r\n                // Props passed into (edit) cell component\r\n                info,\r\n                autocompleteOptions: Object.keys(Object.assign({}, localFunctions, premade)).map(i => ({ id: i })),\r\n                localFunctions,\r\n                saveNewFunction,\r\n                solution: info.resolution.error ? `Missing: ${uniqueMissingContext.reduce((prev, curr) => {\r\n                    if (inheritedContext[curr]) {\r\n                        return prev\r\n                    } else {\r\n                        return prev.concat(curr)\r\n                    }\r\n                }, []).join(', ')}` : info.resolution.solution,\r\n                value: name\r\n            }]\r\n            if (showVariables && uniqueMissingContext) {\r\n                uniqueMissingContext.forEach(key => {\r\n                    variableMap[eqIndex].push(key)\r\n                    res.push({\r\n                        label: key,\r\n                        value: '' + (inheritedContext[key] || (context[key] && context[key].text)),\r\n                        isInherited: !localContext || !localContext[key]\r\n                    })\r\n                })\r\n            }\r\n            return res\r\n        })\r\n        return {\r\n            gridBody,\r\n            variableMap\r\n        }\r\n    }\r\n\r\n    return (\r\n        <StyledDiscreteProcess>\r\n            {isDiscrete &&\r\n                <Section>\r\n                    <StyledSheet\r\n                        localFunctions={localFunctions}\r\n                        setLocalFunctions={setLocalFunctions}\r\n                        equationArray={inputSheet}\r\n                        dispatchEquation={dispatchInputEquation} />\r\n                </Section>\r\n            }\r\n            {isDiscrete && <StyledButton style={{ fontSize: 40, alignSelf: 'center' }} onClick={() => setIsDiscrete(!isDiscrete)}>double_arrow</StyledButton>}\r\n            <Section>\r\n                <StyledSheet\r\n                    localFunctions={localFunctions}\r\n                    setLocalFunctions={setLocalFunctions}\r\n                    equationArray={outputSheet}\r\n                    dispatchEquation={dispatchOutputEquation}>\r\n                    {!isDiscrete && <StyledButton style={{ fontSize: 40 }} onClick={() => setIsDiscrete(!isDiscrete)}>double_arrow</StyledButton>}\r\n                </StyledSheet>\r\n            </Section>\r\n        </StyledDiscreteProcess>\r\n    )\r\n}\r\n\r\nexport default DiscreteProcess\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { useLocalStorage } from 'utils/localStorage'\r\nimport DiscreteProcess from 'components/DiscreteProcess'\r\nimport uuid from 'uuid/v4'\r\nimport MaterialIcon from 'components/buttons/MaterialIcon'\r\n\r\nconst StyledConnect = styled.div`\r\n    min-height: 1px;\r\n    overflow: auto;\r\n    width: 100%;\r\n    text-align: center;\r\n`\r\n\r\nconst Title = styled.div`\r\n    font-size: 1.5rem;\r\n    margin-top: 10px;\r\n`\r\n\r\nconst StyledButton = styled(MaterialIcon)`\r\n    cursor: pointer;\r\n`\r\n\r\nconst SpaceView = () => {\r\n    const [localFunctions, setLocalFunctions] = useLocalStorage({}, 'localFunctions')\r\n    const [processes, setProcesses] = useLocalStorage([], 'discreteProcesses')\r\n\r\n    return (\r\n        <StyledConnect>\r\n            <Title style={{ fontWeight: 'bold' }}>Space</Title>\r\n            <br />\r\n            <StyledButton onClick={() => setProcesses([...processes, { id: uuid() }])}>post_add</StyledButton>\r\n            <StyledButton onClick={() => setProcesses([...processes].slice(0, processes.length - 1))}>delete</StyledButton>\r\n            {processes.map(process => {\r\n                return <DiscreteProcess key={process.id}\r\n                    isDiscrete={process.isDiscrete}\r\n                    setIsDiscrete={isDiscrete => {\r\n                        const newProcesses = Object.assign([], processes)\r\n                        const newProcess = newProcesses.find(i => i.id === process.id)\r\n                        if (newProcess) {\r\n                            newProcess.isDiscrete = isDiscrete\r\n                            setProcesses(newProcesses)\r\n                        } else {\r\n                            console.log(`error: could not find process id ${process.id}`)\r\n                        }\r\n                    }}\r\n                    updateSheet={sheet => {\r\n                        const newProcesses = Object.assign([], processes)\r\n                        const newProcess = newProcesses.find(i => i.id === process.id)\r\n                        if (newProcess) {\r\n                            newProcess[sheet.side] = sheet\r\n                            setProcesses(newProcesses)\r\n                        } else {\r\n                            console.log(`error: could not find process id ${process.id}`)\r\n                        }\r\n                    }}\r\n                    initialInput={process.input || {}}\r\n                    initialOutput={process.output || {}}\r\n                    setProcesses={setProcesses}\r\n                    localFunctions={localFunctions}\r\n                    setLocalFunctions={setLocalFunctions} />\r\n            })}\r\n        </StyledConnect>\r\n    )\r\n}\r\n\r\nexport default SpaceView\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { withRouter } from 'react-router-dom'\r\nimport * as styles from 'styles'\r\n\r\nconst StyledHeader = styled.div`\r\n    background-color: ${styles.extraLightGray};\r\n    height: 62px;\r\n    min-height: 62px;\r\n    width: 100%;\r\n    display: flex;\r\n    flex-grow: 0 !important;\r\n    justify-content: space-between;\r\n    ${'' /* box-shadow: 0px 4px 4px #888;\r\n    border-radius: 6px; */}\r\n`\r\n\r\nconst Image = styled.img`\r\n    margin-left: 2px;\r\n    height: 60px;\r\n`\r\n\r\nconst AfterImage = styled.div`\r\n    padding-left: 10px;\r\n`\r\n\r\nconst TitleLink = styled.div`\r\n    font-family: 'Ubuntu', sans-serif;\r\n    font-size: 20px;\r\n    font-weight: bold;\r\n    margin-top: 20px;\r\n`\r\n\r\nconst LinkHome = styled.div`\r\n    cursor: pointer;\r\n    display: flex;\r\n`\r\n\r\nconst ImageWrapper = styled.div`\r\n    color: black;\r\n    padding-left: 10px;\r\n`\r\n\r\nfunction Header (props) {\r\n    const { history } = props\r\n    return (\r\n        <StyledHeader>\r\n            <LinkHome onClick={() => history.push('/')}>\r\n                <ImageWrapper>\r\n                    <Image src='favicon.ico' alt='' />\r\n                </ImageWrapper>\r\n                <AfterImage>\r\n                    <TitleLink>Mathite</TitleLink>\r\n                </AfterImage>\r\n            </LinkHome>\r\n            {props.children}\r\n        </StyledHeader>\r\n    )\r\n}\r\n\r\nexport default withRouter(Header)\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst StyledHelp = styled.div`\r\n    position: fixed;\r\n    height: calc(100% - 64px);\r\n    width: 100%;\r\n    right: 0px;\r\n    top: 64px;\r\n    transition: top 200ms ease-in-out;\r\n    transition: height 200ms ease-in-out;\r\n    box-shadow: 0px -4px 8px #888;\r\n`\r\n\r\nexport default function Help (props) {\r\n    const { children, showHelp } = props\r\n    if (!showHelp) {\r\n        return null\r\n    }\r\n    return <StyledHelp>\r\n        {children}\r\n    </StyledHelp>\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport * as styles from 'styles'\r\n\r\nconst StyledHelpButton = styled.div`\r\n    color: black;\r\n    cursor: pointer;\r\n    border-radius: 30px;\r\n`\r\n\r\nconst StyledHelpButtonWithHover = styled.div`\r\n    color: black;\r\n    cursor: pointer;\r\n    border-radius: 30px;\r\n    ${styles.buttonHover('Help', 0)}\r\n`\r\n\r\nexport default function HelButton (props) {\r\n    if (props.hover) {\r\n        return (\r\n            <StyledHelpButtonWithHover {...props} style={{ ...props.style, backgroundColor: props.active ? styles.primaryColor : undefined }}>\r\n                <i className='material-icons' style={props.style}>help_outline</i>\r\n            </StyledHelpButtonWithHover>\r\n        )\r\n    } else {\r\n        return (\r\n            <StyledHelpButton {...props} style={{ ...props.style, backgroundColor: props.active ? styles.primaryColor : undefined }}>\r\n                <i className='material-icons' style={props.style}>help_outline</i>\r\n            </StyledHelpButton>\r\n        )\r\n    }\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport * as styles from 'styles'\r\nimport ignoreList from 'utils/math/ignoreList'\r\nimport anvil from 'icons/anvil.svg'\r\nimport pickaxe from 'icons/pickaxe.svg'\r\n// import sword from 'icons/swords.svg'\r\nimport crown from 'icons/crown.svg'\r\nimport easel from 'icons/easel.svg'\r\n\r\nconst StyledHelp = styled.div`\r\n    background: ${styles.extraLightGray};\r\n    width: 100%;\r\n    border-radius: 9px;\r\n    height: 100%;\r\n`\r\n\r\nconst Body = styled.div`\r\n    padding: 20px;\r\n    overflow-y: auto;\r\n    height: calc(100% - 88px);\r\n`\r\n\r\nconst Close = styled.div`\r\n    cursor: pointer;\r\n    color: black;\r\n    position: absolute;\r\n    right: 10px;\r\n    i {\r\n        margin-top: 5px;\r\n        font-size: 2rem;\r\n        border-radius: 20px;\r\n        :hover {\r\n            background: white;\r\n        }\r\n    }\r\n`\r\n\r\nconst IgnoreList = styled.div`\r\n    width: 100%;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n`\r\n\r\nconst Item = styled.div`\r\n    width: 100px;\r\n    padding: 4px;\r\n`\r\n\r\nconst Text = styled.div`\r\n    padding: 6px;\r\n`\r\n\r\nconst StyledLink = styled.div`\r\n    display: contents;\r\n    cursor: pointer;\r\n`\r\n\r\nconst Section = styled.div`\r\n    display: flex;\r\n    padding-bottom: 24px;\r\n`\r\n\r\nconst VerticalGroup = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n`\r\n\r\nconst Title = styled.div`\r\n    font-size: 1.4rem;\r\n    padding-bottom: 8px;\r\n`\r\n\r\nconst Line = styled.div`\r\n    font-size: 1rem;\r\n    padding-bottom: 8px;\r\n`\r\n\r\nexport default function HelpSheet (props) {\r\n    const {\r\n        toggleHelp\r\n    } = props\r\n    return (\r\n        <StyledHelp>\r\n            <Close onClick={toggleHelp}>\r\n                <i className='material-icons'>close</i>\r\n            </Close>\r\n            <Title style={{ padding: 10 }}>\r\n                Help\r\n            </Title>\r\n            <Body>\r\n                <Text>\r\n                    <Section>\r\n                        <VerticalGroup>\r\n                            <Line>{'Show the sections that best fit your needs throughout your workflow.'}</Line>\r\n                            <Line>{'Easily share work with others by sending them the url for the current equation.'}</Line>\r\n                        </VerticalGroup>\r\n                    </Section>\r\n                    <Section>\r\n                        <img src={pickaxe} alt='Material' height={40} width={40} />\r\n                        <VerticalGroup>\r\n                            <Title>{'Define Variables'}</Title>\r\n                            <Line>{'Dynamically generate values for all of the undefined variables in your equations to be used with the command module.'}</Line>\r\n                        </VerticalGroup>\r\n                    </Section>\r\n                    <Section>\r\n                        <img src={anvil} alt='Forge' height={40} width={40} />\r\n                        <VerticalGroup>\r\n                            <Title>{'Build Equation'}</Title>\r\n                            <Line>{'Any textboxes in the first section (except Notes) will be used to create and solve a math problem.'}</Line>\r\n                            <Line>{'Alphabetical characters will be used as variables, and will add more blank textboxes.'}</Line>\r\n                            <Line>{'Variables can be defined as numbers, equations, more variables or any combination.'}</Line>\r\n                            <Line>{'Numbers before words will be used to multiply the variable.'}</Line>\r\n                            <Line>{'Numbers at the end of words will be used as part of the variable name as a subscript.'}</Line>\r\n                            <Line>{'Operators (+-*/()) separate variables.'}</Line>\r\n                        </VerticalGroup>\r\n                    </Section>\r\n                    <Section>\r\n                        <img src={easel} alt='Review' height={40} width={40} />\r\n                        <VerticalGroup>\r\n                            <Title>{'Review'}</Title>\r\n                            <Line>{'Visually validate your equation.'}</Line>\r\n                        </VerticalGroup>\r\n                    </Section>\r\n                    <Section>\r\n                        <img src={crown} alt='Command' height={40} width={40} />\r\n                        <VerticalGroup>\r\n                            <Title>{'Graph'}</Title>\r\n                            <Line>{'Graph your equation using variables left unspecified in the Equation section.'}</Line>\r\n                            <Line>{'Quickly see the changes that occur as you manipulate the Defined Variables (materials).'}</Line>\r\n                            <Line>{'Click on the labels for different lines to show/hide.'}</Line>\r\n                        </VerticalGroup>\r\n                    </Section>\r\n                    <Section>\r\n                        <i style={{ fontSize: 40 }} className='material-icons'>search</i>\r\n                        <VerticalGroup>\r\n                            <Title>{'Search'}</Title>\r\n                            <Line>{'Save functions on your device.'}</Line>\r\n                            <Line>{\"Be specific. It's easy to save a bunch of problems and then delete them later. But names must be unique.\"}</Line>\r\n                            <Line>{'Search saved functions and review your notes.'}</Line>\r\n                            <Line>{'Add the subject or other relevant tags to the beginning of notes to make them easier to find.'}</Line>\r\n                            <Line>{'There are no predefined categories. You make the categories by the notes and variables you create.'}</Line>\r\n                            <Line>{'Try typing \"finance\" into the search and see what premade functions are already there.'}</Line>\r\n                        </VerticalGroup>\r\n                    </Section>\r\n                    <br />\r\n                    <Line>{'Functions that cannot be used as variables:'}</Line>\r\n                </Text>\r\n                <IgnoreList>\r\n                    {ignoreList.map(func => {\r\n                        return <Item key={func}>{func}</Item>\r\n                    })}\r\n                </IgnoreList>\r\n                <Text>\r\n                    <br />\r\n                    Checkout <StyledLink><a href='http://mathjs.org/docs/reference/functions.html' target='_blank' rel='noopener noreferrer'>http://mathjs.org/docs/reference/functions.html</a></StyledLink> for an explanation of what the builtin functions do.\r\n                </Text>\r\n            </Body>\r\n        </StyledHelp>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport * as styles from 'styles'\r\nimport ignoreList from 'utils/math/ignoreList'\r\nimport anvil from 'icons/anvil.svg'\r\nimport pickaxe from 'icons/pickaxe.svg'\r\n// import sword from 'icons/swords.svg'\r\nimport crown from 'icons/crown.svg'\r\nimport easel from 'icons/easel.svg'\r\n\r\nconst StyledHelp = styled.div`\r\n    background: ${styles.extraLightGray};\r\n    width: 100%;\r\n    border-radius: 9px;\r\n    height: 100%;\r\n`\r\n\r\nconst Body = styled.div`\r\n    padding: 20px;\r\n    overflow-y: auto;\r\n    height: calc(100% - 88px);\r\n`\r\n\r\nconst Close = styled.div`\r\n    cursor: pointer;\r\n    color: black;\r\n    position: absolute;\r\n    right: 10px;\r\n    i {\r\n        margin-top: 5px;\r\n        font-size: 2rem;\r\n        border-radius: 20px;\r\n        :hover {\r\n            background: white;\r\n        }\r\n    }\r\n`\r\n\r\nconst IgnoreList = styled.div`\r\n    width: 100%;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n`\r\n\r\nconst Item = styled.div`\r\n    width: 100px;\r\n    padding: 4px;\r\n`\r\n\r\nconst Text = styled.div`\r\n    padding: 6px;\r\n`\r\n\r\nconst StyledLink = styled.div`\r\n    display: contents;\r\n    cursor: pointer;\r\n`\r\n\r\nconst Section = styled.div`\r\n    display: flex;\r\n    padding-bottom: 24px;\r\n`\r\n\r\nconst VerticalGroup = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n`\r\n\r\nconst Title = styled.div`\r\n    font-size: 1.4rem;\r\n    padding-bottom: 8px;\r\n`\r\n\r\nconst Line = styled.div`\r\n    font-size: 1rem;\r\n    padding-bottom: 8px;\r\n`\r\n\r\nexport default function HelpEquation (props) {\r\n    const {\r\n        toggleHelp\r\n    } = props\r\n    return (\r\n        <StyledHelp>\r\n            <Close onClick={toggleHelp}>\r\n                <i className='material-icons'>close</i>\r\n            </Close>\r\n            <Title style={{ padding: 10 }}>\r\n                Help\r\n            </Title>\r\n            <Body>\r\n                <Text>\r\n                    <Section>\r\n                        <VerticalGroup>\r\n                            <Line>{`Show the sections that best fit your needs throughout your workflow.`}</Line>\r\n                            <Line>{`Easily share work with others by sending them the url for the current equation.`}</Line>\r\n                        </VerticalGroup>\r\n                    </Section>\r\n                    <Section>\r\n                        <img src={pickaxe} alt='Material' height={40} width={40} />\r\n                        <VerticalGroup>\r\n                            <Title>{`Define Variables`}</Title>\r\n                            <Line>{`Dynamically generate values for all of the undefined variables in your equations to be used with the command module.`}</Line>\r\n                        </VerticalGroup>\r\n                    </Section>\r\n                    <Section>\r\n                        <img src={anvil} alt='Forge' height={40} width={40} />\r\n                        <VerticalGroup>\r\n                            <Title>{`Build Equation`}</Title>\r\n                            <Line>{`Any textboxes in the first section (except Notes) will be used to create and solve a math problem.`}</Line>\r\n                            <Line>{`Alphabetical characters will be used as variables, and will add more blank textboxes.`}</Line>\r\n                            <Line>{`Variables can be defined as numbers, equations, more variables or any combination.`}</Line>\r\n                            <Line>{`Numbers before words will be used to multiply the variable.`}</Line>\r\n                            <Line>{`Numbers at the end of words will be used as part of the variable name as a subscript.`}</Line>\r\n                            <Line>{`Operators (+-*/()) separate variables.`}</Line>\r\n                        </VerticalGroup>\r\n                    </Section>\r\n                    <Section>\r\n                        <img src={easel} alt='Review' height={40} width={40} />\r\n                        <VerticalGroup>\r\n                            <Title>{`Review`}</Title>\r\n                            <Line>{`Visually validate your equation.`}</Line>\r\n                        </VerticalGroup>\r\n                    </Section>\r\n                    {/* <Section>\r\n                        <img src={sword} alt='Wield' height={40} width={40} />\r\n                        <VerticalGroup>\r\n                            <Title>{`Wield module`}</Title>\r\n                        </VerticalGroup>\r\n                    </Section> */}\r\n                    <Section>\r\n                        <img src={crown} alt='Command' height={40} width={40} />\r\n                        <VerticalGroup>\r\n                            <Title>{`Graph`}</Title>\r\n                            <Line>{`Graph your equation using variables left unspecified in the Equation section.`}</Line>\r\n                            <Line>{`Quickly see the changes that occur as you manipulate the Defined Variables (materials).`}</Line>\r\n                            <Line>{`Click on the labels for different lines to show/hide.`}</Line>\r\n                        </VerticalGroup>\r\n                    </Section>\r\n                    <Section>\r\n                        <i style={{ fontSize: 40 }} className='material-icons'>search</i>\r\n                        <VerticalGroup>\r\n                            <Title>{`Search`}</Title>\r\n                            <Line>{`Save functions on your device.`}</Line>\r\n                            <Line>{`Be specific. It's easy to save a bunch of problems and then delete them later. But names must be unique.`}</Line>\r\n                            <Line>{`Search saved functions and review your notes.`}</Line>\r\n                            <Line>{`Add the subject or other relevant tags to the beginning of notes to make them easier to find.`}</Line>\r\n                            <Line>{`There are no predefined categories. You make the categories by the notes and variables you create.`}</Line>\r\n                            <Line>{`Try typing \"finance\" into the search and see what premade functions are already there.`}</Line>\r\n                        </VerticalGroup>\r\n                    </Section>\r\n                    <br />\r\n                    <Line>{`Functions that cannot be used as variables:`}</Line>\r\n                </Text>\r\n                <IgnoreList>\r\n                    {ignoreList.map(func => {\r\n                        return <Item key={func}>{func}</Item>\r\n                    })}\r\n                </IgnoreList>\r\n                <Text>\r\n                    <br />\r\n                    Checkout <StyledLink><a href=\"http://mathjs.org/docs/reference/functions.html\" target='_blank' rel='noopener noreferrer'>http://mathjs.org/docs/reference/functions.html</a></StyledLink> for an explanation of what the builtin functions do.\r\n                </Text>\r\n            </Body>\r\n        </StyledHelp>\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\nimport { BrowserRouter, Switch, Route } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport HomePage from 'views/Home'\r\nimport DrawView from 'views/Draw'\r\nimport EquationView from 'views/Equation'\r\nimport SheetView from 'views/Sheet'\r\nimport SpaceView from 'views/Space'\r\nimport Header from 'components/Header'\r\nimport Help from 'components/Help'\r\nimport HelpButton from 'components/buttons/Help'\r\nimport HelpSheet from 'components/HelpSheet'\r\nimport HelpEquation from 'components/HelpEquation'\r\n// import Footer from 'components/Footer'\r\n\r\n/*\r\n    Extra small devices\r\n    @media (max-width:480px) {\r\n    }\r\n    Small devices\r\n    @media (max-width:768px) {\r\n    }\r\n    Medium devices\r\n    @media (max-width:992px) {\r\n    }\r\n    Large devices\r\n    @media (max-width:1200px) {\r\n    }\r\n*/\r\n\r\nconst StyledApp = styled.div`\r\n    font-family: 'Ubuntu', sans-serif;\r\n    overflow: hidden;\r\n    height: 100vh;\r\n    width: 100vw;\r\n    display: flex;\r\n    flex-direction: column;\r\n    > div {\r\n        flex-grow: 1;\r\n    }\r\n\r\n    input {\r\n        font-family: 'Ubuntu', sans-serif;\r\n        border: none;\r\n    }\r\n`\r\n\r\nconst Menu = styled.div`\r\n    display: flex;\r\n    i {\r\n        font-size: 3rem;\r\n    }\r\n`\r\n\r\nconst MenuButton = styled.div`\r\n    padding: 5px;\r\n`\r\n\r\nexport default function App (props) {\r\n    const [showHelp, setShowHelp] = useState(false)\r\n\r\n    function toggleHelp () {\r\n        setShowHelp(!showHelp)\r\n    }\r\n\r\n    return (\r\n        <StyledApp>\r\n            <BrowserRouter>\r\n                <Header>\r\n                    <Route path='/(eq|sheet)' render={props => <Menu>\r\n                        <MenuButton>\r\n                            <HelpButton hover active={showHelp} onClick={toggleHelp} />\r\n                        </MenuButton>\r\n                    </Menu>} />\r\n                </Header>\r\n                <Switch>\r\n                    <Route path='/draw' render={props => <DrawView {...props} toggleHelp={toggleHelp} />}/>\r\n                    <Route path='/eq' render={props => <EquationView {...props} toggleHelp={toggleHelp} />}/>\r\n                    <Route path='/sheet' render={props => <SheetView {...props} toggleHelp={toggleHelp} />} />\r\n                    <Route path='/space' render={props => <SpaceView {...props} toggleHelp={toggleHelp} />}/>\r\n                    <Route path='/' render={props => <HomePage {...props} toggleHelp={toggleHelp} />}/>\r\n                </Switch>\r\n                <Help toggleHelp={toggleHelp} showHelp={showHelp}>\r\n                    <Switch>\r\n                        <Route path='/eq' render={props => <HelpEquation {...props} toggleHelp={toggleHelp} />} />\r\n                        <Route path='/sheet' render={props => <HelpSheet {...props} toggleHelp={toggleHelp} />} />\r\n                    </Switch>\r\n                </Help>\r\n                {/* <Footer /> */}\r\n            </BrowserRouter>\r\n        </StyledApp>\r\n    )\r\n}\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n    window.location.hostname === 'localhost' ||\r\n        // [::1] is the IPv6 localhost address.\r\n        window.location.hostname === '[::1]' ||\r\n        // 127.0.0.1/8 is considered localhost for IPv4.\r\n        window.location.hostname.match(\r\n            /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n        )\r\n)\r\n\r\nexport default function register () {\r\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n        // The URL constructor is available in all browsers that support SW.\r\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location)\r\n        if (publicUrl.origin !== window.location.origin) {\r\n            // Our service worker won't work if PUBLIC_URL is on a different origin\r\n            // from what our page is served on. This might happen if a CDN is used to\r\n            // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n            return\r\n        }\r\n\r\n        window.addEventListener('load', () => {\r\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\r\n\r\n            if (isLocalhost) {\r\n                // This is running on localhost. Lets check if a service worker still exists or not.\r\n                checkValidServiceWorker(swUrl)\r\n\r\n                // Add some additional logging to localhost, pointing developers to the\r\n                // service worker/PWA documentation.\r\n                navigator.serviceWorker.ready.then(() => {\r\n                    console.log(\r\n                        'This web app is being served cache-first by a service ' +\r\n                            'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n                    )\r\n                })\r\n            } else {\r\n                // Is not local host. Just register service worker\r\n                registerValidSW(swUrl)\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nfunction registerValidSW (swUrl) {\r\n    navigator.serviceWorker\r\n        .register(swUrl)\r\n        .then(registration => {\r\n            registration.onupdatefound = () => {\r\n                const installingWorker = registration.installing\r\n                installingWorker.onstatechange = () => {\r\n                    if (installingWorker.state === 'installed') {\r\n                        if (navigator.serviceWorker.controller) {\r\n                            // At this point, the old content will have been purged and\r\n                            // the fresh content will have been added to the cache.\r\n                            // It's the perfect time to display a \"New content is\r\n                            // available; please refresh.\" message in your web app.\r\n                            console.log('New content is available; please refresh.')\r\n                        } else {\r\n                            // At this point, everything has been precached.\r\n                            // It's the perfect time to display a\r\n                            // \"Content is cached for offline use.\" message.\r\n                            console.log('Content is cached for offline use.')\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        .catch(error => {\r\n            console.error('Error during service worker registration:', error)\r\n        })\r\n}\r\n\r\nfunction checkValidServiceWorker (swUrl) {\r\n    // Check if the service worker can be found. If it can't reload the page.\r\n    fetch(swUrl)\r\n        .then(response => {\r\n            // Ensure service worker exists, and that we really are getting a JS file.\r\n            if (\r\n                response.status === 404 ||\r\n                response.headers.get('content-type').indexOf('javascript') === -1\r\n            ) {\r\n                // No service worker found. Probably a different app. Reload the page.\r\n                navigator.serviceWorker.ready.then(registration => {\r\n                    registration.unregister().then(() => {\r\n                        window.location.reload()\r\n                    })\r\n                })\r\n            } else {\r\n                // Service worker found. Proceed as normal.\r\n                registerValidSW(swUrl)\r\n            }\r\n        })\r\n        .catch(() => {\r\n            console.log(\r\n                'No internet connection found. App is running in offline mode.'\r\n            )\r\n        })\r\n}\r\n\r\nexport function unregister () {\r\n    if ('serviceWorker' in navigator) {\r\n        navigator.serviceWorker.ready.then(registration => {\r\n            registration.unregister()\r\n        })\r\n    }\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from 'views/App'\r\nimport registerServiceWorker from 'utils/registerServiceWorker'\r\n\r\nReactDOM.render(\r\n    <App />,\r\n    document.getElementById('app')\r\n)\r\nregisterServiceWorker()\r\n","module.exports = __webpack_public_path__ + \"static/media/anvil.76c698e6.svg\";","module.exports = __webpack_public_path__ + \"static/media/crown.0375efa0.svg\";","module.exports = __webpack_public_path__ + \"static/media/easel.7909871e.svg\";"],"sourceRoot":""}